(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["1b41c7d4"],{"07b3":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",[a("q-card",[a("q-card-title",[a("p",{staticClass:"q-headline"},[t._v(t._s(t.$t(t.$changeCase.sentenceCase(t.$options.name))))])])],1),a("q-table",{attrs:{data:t.authUser,pagination:t.pagination,columns:t.columns,"visible-columns":t.visibleColumns,loading:t.loading,filter:t.filter,selection:"single",selected:t.selected,"row-key":".key"},on:{"update:pagination":function(e){t.pagination=e},"update:selected":function(e){t.selected=e}},scopedSlots:t._u([{key:"top-selection",fn:function(e){return[a("div",{staticStyle:{"padding-top":"8px","padding-bottom":"8px"}},[1==t.selected.length?a("q-btn",{staticClass:"q-mr-sm",attrs:{color:"primary",round:"",icon:"edit"},on:{click:function(e){t.openUpdateFrom(t.inputForm,t.selected[0])}}}):t._e()],1)]}},{key:"top-left",fn:function(e){return[a("q-search",{attrs:{"hide-underline":"",color:"secondary"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]}},{key:"top-right",fn:function(e){return[a("q-table-columns",{staticClass:"q-mr-sm",attrs:{color:"secondary",columns:t.columns},model:{value:t.visibleColumns,callback:function(e){t.visibleColumns=e},expression:"visibleColumns"}})]}},{key:"body-cell-email",fn:function(e){return a("q-td",{attrs:{props:e}},[a("q-btn",{attrs:{flat:"",label:e.value},on:{click:function(a){t.selected=[t._.find(t.authUser,{".key":e.row[".key"]})],t.openUpdateFrom(t.inputForm,t.selected[0])}}})],1)}},{key:"body-cell-department",fn:function(e){return a("q-td",{attrs:{props:e}},[t._v("\n      "+t._s(t.getDeptName(e.value))+"\n    ")])}}])}),a("q-modal",{attrs:{maximized:"","content-css":{padding:"50px"}},model:{value:t.formModal,callback:function(e){t.formModal=e},expression:"formModal"}},[a("div",{staticClass:"row justify-center gutter-lg"},[a("div",{staticClass:"col-xl-4 col-lg-4 col-md-4 col-sm12 col-xs-12"},[a("div",{staticClass:"q-headline"},[t._v(t._s(t.$t(t.$changeCase.sentenceCase(t.$options.name))))]),a("div",{staticClass:"q-subheading"},[t._v(t._s(t.subHeading))])]),a("div",{staticClass:"col-xl-8 col-lg-8 col-md-8 col-sm12 col-xs-12"},[a("q-field",{attrs:{label:t.$t("ID"),"label-width":t.labelWidth}},[a("q-input",{attrs:{disable:""},model:{value:t.inputForm[".key"],callback:function(e){t.$set(t.inputForm,".key",e)},expression:"inputForm['.key']"}})],1),a("q-field",{attrs:{label:t.$t("Email"),"label-width":t.labelWidth}},[a("q-input",{attrs:{disable:""},model:{value:t.inputForm.email,callback:function(e){t.$set(t.inputForm,"email",e)},expression:"inputForm.email"}})],1),a("q-field",{attrs:{label:t.$t("First name")+" *","label-width":t.labelWidth,error:t.$v.inputForm.firstName.$error,"error-label":t.$t("Requires non-empty data")}},[a("q-input",{on:{blur:function(e){t.$v.inputForm.firstName.$touch()}},model:{value:t.inputForm.firstName,callback:function(e){t.$set(t.inputForm,"firstName",e)},expression:"inputForm.firstName"}})],1),a("q-field",{attrs:{label:t.$t("Last name")+" *","label-width":t.labelWidth,error:t.$v.inputForm.lastName.$error,"error-label":t.$t("Requires non-empty data")}},[a("q-input",{on:{blur:function(e){t.$v.inputForm.lastName.$touch()}},model:{value:t.inputForm.lastName,callback:function(e){t.$set(t.inputForm,"lastName",e)},expression:"inputForm.lastName"}})],1),a("q-field",{attrs:{label:t.$t("Locale"),"label-width":t.labelWidth}},[a("q-select",{attrs:{options:t.localeOptions},model:{value:t.inputForm.locale,callback:function(e){t.$set(t.inputForm,"locale",e)},expression:"inputForm.locale"}})],1),a("q-field",{attrs:{label:t.$t("Active"),"label-width":t.labelWidth}},[a("q-toggle",{attrs:{"checked-icon":"sentiment very satisfied","unchecked-icon":"sentiment very dissatisfied"},model:{value:t.inputForm.active,callback:function(e){t.$set(t.inputForm,"active",e)},expression:"inputForm.active"}})],1),a("q-field",{attrs:{label:t.$t("Roles"),"label-width":t.labelWidth}},[a("q-option-group",{attrs:{type:"toggle",color:"secondary",options:t.authGroupOptions},model:{value:t.inputForm.authGroup,callback:function(e){t.$set(t.inputForm,"authGroup",e)},expression:"inputForm.authGroup"}})],1),a("div",{staticClass:"submit"},["update"===t.formAction?a("q-btn",{staticClass:"q-mr-sm",attrs:{color:"primary",icon:"save","wait-for-ripple":"",label:t.$t("Save")},on:{click:t.updateForm}}):t._e(),a("q-btn",{staticClass:"q-mr-sm",attrs:{color:"light",icon:"cancel","wait-for-ripple":"",label:t.$t("Cancel")},on:{click:function(e){t.formModal=!1}}})],1)],1)])])],1)},i=[];n._withStripped=!0;var o=a("3156"),r=a.n(o),l=a("278c"),s=a.n(l),c=(a("7514"),a("96cf"),a("c973")),u=a.n(c),d=a("2f62"),p=a("b5ae"),m=a("44de"),f=a("05d8"),h=a("7266"),b=a("fe5b"),v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div")},g=[];v._withStripped=!0;a("ac6a");var $={data:function(){return{authGroupOptions:[]}},created:function(){var t=this;t.$database.collection("authGroup").orderBy("index").get().then(function(e){e.forEach(function(e){t.authGroupOptions.push({id:e.id,data:e.data(),value:e.id,label:"".concat(e.data().code," : ").concat(e.data().description),model:!1})})})}},_=$,q=a("2877"),w=Object(q["a"])(_,v,g,!1,null,null,null);w.options.__file="authGroupOptions.vue";var F=w.exports,y=a("0caf"),k=a("da0d"),x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div")},O=[];x._withStripped=!0;var N={data:function(){return{localeOptions:[]}},created:function(){var t=this;t.$database.collection("locale").get().then(function(e){e.forEach(function(e){t.localeOptions.push({id:e.id,data:e.data(),value:e.id,label:"".concat(e.data().value),model:!1})})})}},C=N,E=Object(q["a"])(C,x,O,!1,null,null,null);E.options.__file="localeOptions.vue";var U=E.exports,G={name:"userAccounts",mixins:[m["a"],f["a"],h["a"],b["a"],F,U,y["a"],k["a"]],data:function(){return{subHeading:null,formAction:null,collectionSize:0,pagination:{sortBy:"firstName",descending:!1},columns:[{name:"id",label:this.$t("ID"),field:".key",sortable:!0,align:"left"},{name:"email",label:this.$t("Email"),field:"email",sortable:!0,align:"left"},{name:"firstName",label:this.$t("First name"),field:"firstName",sortable:!0,align:"left"},{name:"lastName",label:this.$t("Last name"),field:"lastName",sortable:!0,align:"left"},{name:"department",label:this.$t("Department"),field:"department",sortable:!1,align:"left"},{name:"authGroup",label:this.$t("Roles"),field:"authGroup",sortable:!1,align:"left"},{name:"status",label:this.$t("Status"),field:"active",sortable:!1,align:"left"}],visibleColumns:["email","firstName","lastName","department","status"],selected:[],filter:"",loading:!0,formModal:!1,inputForm:{".key":"",email:"",firstName:"",lastName:"",locale:"",active:!1,authGroup:[]}}},validations:{inputForm:{email:{required:p["required"]},firstName:{required:p["required"]},lastName:{required:p["required"]},locale:{required:p["required"]}}},firestore:function(){return{authUser:this.$database.collection("authUser"),authGroup:this.$database.collection("authGroup").orderBy("index")}},methods:{updateForm:function(){var t=u()(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this,e.inputForm.modifiedBy=e.userId,e.inputForm.modifiedOn=new Date,t.next=5,e.updateProcess(e.$firestore.authUser,e.inputForm,e.$v.inputForm);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getDeptName:function(t){var e=this,a="...";return e.departmentOptions&&e._.find(e.departmentOptions,{id:t})&&(a=e._.find(e.departmentOptions,{id:t}).data.code),a}},created:function(){var t=u()(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.loadingState(this.$firestore.authUser);case 2:e=t.sent,a=s()(e,2),this.collectionSize=a[0],this.loading=a[1];case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),computed:r()({},Object(d["c"])(["userId"])),watch:{selected:function(){this.selected.length&&window.scrollTo(0,0)}}},S=G,j=(a("a2d7"),Object(q["a"])(S,n,i,!1,null,null,null));j.options.__file="userAccounts.vue";e["default"]=j.exports},"0caf":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div")},i=[];n._withStripped=!0;a("ac6a");var o={data:function(){return{departmentOptions:[]}},created:function(){var t=this;t.$database.collection("department").orderBy("code").get().then(function(e){e.forEach(function(e){t.departmentOptions.push({id:e.id,data:e.data(),value:e.id,label:"".concat(e.data().code," : ").concat(e.data().description),model:!1})})})}},r=o,l=a("2877"),s=Object(l["a"])(r,n,i,!1,null,null,null);s.options.__file="departmentOptions.vue";e["a"]=s.exports},"1fb5e":function(t,e,a){},7266:function(t,e,a){"use strict";var n,i,o=a("3156"),r=a.n(o),l=a("2f62"),s={methods:{hasPermission:function(t){var e=this._.uniq(this.userPermission),a=this._.intersection(e,t).length;return a}},computed:r()({},Object(l["c"])(["userPermission"]))},c=s,u=a("2877"),d=Object(u["a"])(c,n,i,!1,null,null,null);d.options.__file="hasPermission.vue";e["a"]=d.exports},a2d7:function(t,e,a){"use strict";var n=a("1fb5e"),i=a.n(n);i.a},da0d:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div")},i=[];n._withStripped=!0;a("ac6a");var o={data:function(){return{positionOptions:[]}},created:function(){var t=this;t.$database.collection("position").get().then(function(e){e.forEach(function(e){t.positionOptions.push({id:e.id,data:e.data(),value:e.id,label:"".concat(e.data().code," : ").concat(e.data().jobTitleEnglish),model:!1})})})}},r=o,l=a("2877"),s=Object(l["a"])(r,n,i,!1,null,null,null);s.options.__file="positionOptions.vue";e["a"]=s.exports},fe5b:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div")},i=[];n._withStripped=!0;a("96cf");var o=a("c973"),r=a.n(o),l=(a("ac6a"),a("551c"),{data:function(){return{authUserOptions:[]}},methods:{getAuthUserOptions:function(){var t=this;return new Promise(function(e){var a=t,n=[];a.$database.collection("authUser").where("active","==",!0).orderBy("firstName").get().then(function(t){return t.forEach(function(t){n.push({id:t.id,data:t.data(),department:t.data().department,reportTo:t.data().reportTo,photo:t.data().photo,value:t.id,label:"".concat(t.data().firstName," ").concat(t.data().lastName),model:!1})}),e(n)}).catch(function(t){console.log(t)})})}},created:function(){var t=r()(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this,t.next=3,e.getAuthUserOptions();case 3:e.authUserOptions=t.sent;case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}),s=l,c=a("2877"),u=Object(c["a"])(s,n,i,!1,null,null,null);u.options.__file="authUserOptions.vue";e["a"]=u.exports}}]);