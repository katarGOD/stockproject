(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["3e7a3176"],{"2bab":function(t,e,r){},"4dbc":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("q-page",[r("q-card",{staticStyle:{"margin-bottom":"5px"}},[r("q-card-title",[r("p",{staticClass:"q-headline"},[t._v(t._s(t.$t(t.$changeCase.sentenceCase(t.$options.name))))])])],1),r("q-table",{attrs:{"row-key":".key",selection:"multiple",columns:t.columns,data:t.po,filter:t.filter,loading:t.loading,pagination:t.pagination,"visible-columns":t.visibleColumns,selected:t.selected},on:{"update:pagination":function(e){t.pagination=e},"update:selected":function(e){t.selected=e}},scopedSlots:t._u([{key:"top-selection",fn:function(e){return[r("div",{staticStyle:{"padding-top":"9px","padding-bottom":"8px"}},[1==t.selected.length?r("q-btn",{staticClass:"q-mr-sm",attrs:{color:"primary",icon:"edit",round:""},on:{click:function(e){t.openUpdateFrom(t.inputForm,t.selected[0])}}}):t._e(),r("q-btn",{staticClass:"q-mr-sm",attrs:{color:"negative",delete:"",icon:"delete",round:""},on:{click:function(e){t.deleteRow()}}})],1)]}},{key:"top-left",fn:function(e){return[r("q-btn",{staticClass:"q-mr-sm",attrs:{color:"secondary",icon:"add_circle",round:""},on:{click:function(e){t.openAddFormModel(t.inputForm)}}}),r("q-search",{attrs:{"hide-underline":"",color:"secondary"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]}},{key:"top-right",fn:function(e){return[r("q-table-columns",{staticClass:"q-mr-sm",attrs:{color:"secondary",columns:t.columns},model:{value:t.visibleColumns,callback:function(e){t.visibleColumns=e},expression:"visibleColumns"}})]}},{key:"body-cell-index",fn:function(e){return r("q-td",{attrs:{props:e}},[r("span",{attrs:{small:"",color:"secondary"}},[r("q-btn",{attrs:{size:"xs",small:"",flat:"",round:"",icon:"remove"},on:{click:function(r){t.decreaseIndex(e,t.$firestore.productType)}}}),t._v("\n        "+t._s(e.value)+"\n        "),r("q-btn",{attrs:{size:"xs",small:"",flat:"",round:"",icon:"add"},on:{click:function(r){t.increaseIndex(e,t.$firestore.productType)}}})],1)])}},{key:"body-cell-code",fn:function(e){return r("q-td",{attrs:{props:e}},[r("q-btn",{attrs:{flat:"",label:e.value},on:{click:function(r){t.selected=[t._.find(t.productType,{".key":e.row[".key"]})],t.openUpdateFrom(t.inputForm,t.selected[0])}}})],1)}}])}),r("q-modal",{attrs:{maximized:"","content-css":{padding:"50px"}},model:{value:t.formModal,callback:function(e){t.formModal=e},expression:"formModal"}},[r("div",{staticClass:"row justify-center gutter-lg"},[r("div",{staticClass:"col-xl-4 col-lg-4 col-md-4 col-sm12 col-xs-12"},[r("div",{staticClass:"q-headline"},[t._v(t._s(t.$t(t.$changeCase.sentenceCase(t.$options.name))))]),r("div",{staticClass:"q-subheading"},[t._v(t._s(t.subHeading))]),r("br"),r("br"),r("br"),t.addProductCheck?r("div",[r("q-list-header",[t._v(t._s(t.$t("Add Product")))]),r("q-field",{attrs:{label:t.$t("Product type")+" *","label-width":t.labelWidth,error:t.$v.productForm.productType.$error,"error-label":t.$t("Requires non-empty data")}},[r("q-select",{attrs:{options:t.productTypeOptions},on:{blur:function(e){t.$v.productForm.productType.$touch()}},model:{value:t.productForm.productType,callback:function(e){t.$set(t.productForm,"productType",e)},expression:"productForm.productType"}})],1),r("q-field",{attrs:{label:t.$t("Product")+" *","label-width":t.labelWidth,error:t.$v.productForm.product.$error,"error-label":t.$t("Requires non-empty data")}},[r("q-select",{attrs:{options:t.productOptions},on:{blur:function(e){t.$v.productForm.product.$touch()}},model:{value:t.productForm.product,callback:function(e){t.$set(t.productForm,"product",e)},expression:"productForm.product"}})],1),r("q-field",{attrs:{label:t.$t("Qty")+" *","label-width":t.labelWidth,error:t.$v.productForm.qty.$error,"error-label":(t.$v.productForm.qty.required?"":t.$t("Requires non-empty data"))+" "+(t.$v.productForm.qty.numeric?"":t.$t("onlyNumerics"))}},[r("q-input",{attrs:{type:"number",disable:"approval"===t.productForm.approval},on:{blur:function(e){t.$v.productForm.qty.$touch()}},model:{value:t.productForm.qty,callback:function(e){t.$set(t.productForm,"qty",e)},expression:"productForm.qty"}})],1),r("div",{staticClass:"submit"},[r("q-btn",{staticClass:"q-mr-sm",attrs:{color:"primary",icon:"save","wait-for-ripple":"",disable:t.$v.productForm.$invalid,label:t.$t("Save")},on:{click:t.addProductForm}})],1)],1):t._e()]),r("div",{staticClass:"col-xl-8 col-lg-8 col-md-8 col-sm12 col-xs-12"},[r("q-field",{attrs:{label:t.$t("ID"),"label-width":t.labelWidth}},[r("q-input",{attrs:{disable:""},model:{value:t.inputForm[".key"],callback:function(e){t.$set(t.inputForm,".key",e)},expression:"inputForm['.key']"}})],1),r("q-field",{attrs:{label:t.$t("Index")+" *","label-width":t.labelWidth,error:t.$v.inputForm.index.$error,"error-label":(t.$v.inputForm.index.required?"":t.$t("Requires non-empty data"))+" "+(t.$v.inputForm.index.numeric?"":t.$t("onlyNumerics"))}},[r("q-input",{attrs:{type:"number"},on:{blur:function(e){t.$v.inputForm.index.$touch()}},model:{value:t.inputForm.index,callback:function(e){t.$set(t.inputForm,"index",e)},expression:"inputForm.index"}})],1),r("q-field",{attrs:{label:t.$t("Code")+" *","label-width":t.labelWidth,error:t.$v.inputForm.code.$error,"error-label":""+(t.$v.inputForm.code.required?"":t.$t("Requires non-empty data"))}},[r("q-input",{on:{blur:function(e){t.$v.inputForm.code.$touch()}},model:{value:t.inputForm.code,callback:function(e){t.$set(t.inputForm,"code",e)},expression:"inputForm.code"}})],1),r("q-field",{attrs:{label:t.$t("Stock Type")+" *","label-width":t.labelWidth,error:t.$v.inputForm.stockType.$error,"error-label":t.$t("Requires non-empty data")}},[r("q-select",{attrs:{options:t.stockTypeOptions},on:{blur:function(e){t.$v.inputForm.stockType.$touch()}},model:{value:t.inputForm.stockType,callback:function(e){t.$set(t.inputForm,"stockType",e)},expression:"inputForm.stockType"}})],1),r("q-field",{attrs:{label:t.$t("Product Type")+" *","label-width":t.labelWidth,error:t.$v.inputForm.productType.$error,"error-label":t.$t("Requires non-empty data")}},[r("q-select",{attrs:{options:t.productTypeOptions},on:{blur:function(e){t.$v.inputForm.productType.$touch()}},model:{value:t.inputForm.productType,callback:function(e){t.$set(t.inputForm,"productType",e)},expression:"inputForm.productType"}})],1),r("q-field",{attrs:{label:t.$t("Supplier")+" *","label-width":t.labelWidth,error:t.$v.inputForm.supplier.$error,"error-label":t.$t("Requires non-empty data")}},[r("q-select",{attrs:{options:t.supplierOptions},on:{blur:function(e){t.$v.inputForm.supplier.$touch()}},model:{value:t.inputForm.supplier,callback:function(e){t.$set(t.inputForm,"supplier",e)},expression:"inputForm.supplier"}})],1),r("q-field",{attrs:{label:t.$t("Description"),"label-width":t.labelWidth}},[r("q-input",{model:{value:t.inputForm.description,callback:function(e){t.$set(t.inputForm,"description",e)},expression:"inputForm.description"}})],1),r("q-table",{attrs:{"row-key":".key",selection:"none",columns:t.columnsProduct,data:t.poProductTable,filter:t.filterProduct,loading:t.loading,pagination:t.pagination,"visible-columns":t.visibleColumnsProduct},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"top",fn:function(e){return[t.addProductCheck?r("div",[r("q-btn",{staticClass:"q-mr-sm",attrs:{color:"red","wait-for-ripple":"",label:t.$t("Hidden")},on:{click:t.hideProduct}})],1):r("div",[r("q-btn",{staticClass:"q-mr-sm",attrs:{color:"primary","wait-for-ripple":"",label:t.$t("Add Product")},on:{click:t.addProduct}})],1)]}},{key:"body-cell-index",fn:function(e){return r("q-td",{attrs:{props:e}},[r("span",{attrs:{small:"",color:"secondary"}},[t._v("\n            "+t._s(e.row.__index)+"\n          ")])])}},{key:"body-cell-product",fn:function(e){return r("q-td",{attrs:{props:e}},[r("span",{attrs:{small:"",color:"secondary"}},[t._v("\n            "+t._s(t._.find(t.productOptions,{id:e.row.product}).label)+"\n          ")])])}},{key:"body-cell-productType",fn:function(e){return r("q-td",{attrs:{props:e}},[r("span",{attrs:{small:"",color:"secondary"}},[t._v("\n            "+t._s(t._.find(t.productTypeOptions,{id:e.row.productType}).label)+"\n          ")])])}},{key:"body-cell-price",fn:function(e){return r("q-td",{attrs:{props:e}},[r("span",{attrs:{small:"",color:"secondary"}},[t._v("\n            "+t._s(t._.find(t.productOptions,{id:e.row.product}).data.buyIn)+"\n          ")])])}},{key:"body-cell-action",fn:function(e){return r("q-td",{attrs:{props:e}},[r("span",{attrs:{small:"",color:"secondary"}},[r("q-btn",{attrs:{size:"xs",color:"red",round:"",icon:"remove"},on:{click:function(r){t.removeRow(e)}}})],1)])}},{key:"body-cell-code",fn:function(e){return r("q-td",{attrs:{props:e}},[r("q-btn",{attrs:{flat:"",label:e.value},on:{click:function(r){t.selected=[t._.find(t.productType,{".key":e.row[".key"]})],t.openUpdateFrom(t.inputForm,t.selected[0])}}})],1)}}])}),r("q-field",{attrs:{label:t.$t("Qty")+" *","label-width":t.labelWidth,error:t.$v.inputForm.qty.$error,"error-label":(t.$v.inputForm.qty.required?"":t.$t("Requires non-empty data"))+" "+(t.$v.inputForm.qty.numeric?"":t.$t("onlyNumerics"))}},[r("q-input",{attrs:{type:"number"},on:{blur:function(e){t.$v.inputForm.qty.$touch()}},model:{value:t.inputForm.qty,callback:function(e){t.$set(t.inputForm,"qty",e)},expression:"inputForm.qty"}})],1),r("q-field",{attrs:{label:t.$t("Total price")+" *","label-width":t.labelWidth,error:t.$v.inputForm.totalPrice.$error,"error-label":(t.$v.inputForm.totalPrice.required?"":t.$t("Requires non-empty data"))+" "+(t.$v.inputForm.totalPrice.numeric?"":t.$t("onlyNumerics"))}},[r("q-input",{attrs:{type:"number",disable:""},on:{blur:function(e){t.$v.inputForm.totalPrice.$touch()}},model:{value:t.inputForm.totalPrice,callback:function(e){t.$set(t.inputForm,"totalPrice",e)},expression:"inputForm.totalPrice"}})],1),r("q-field",{attrs:{label:t.$t("Approval status"),"label-width":t.labelWidth}},[r("q-btn-toggle",{attrs:{"toggle-color":"primary",disable:!t.hasPermission(["admin"]),options:[{label:t.$t("Approved"),value:"approval"},{label:t.$t("Waiting for approval"),value:"waiting"}]},model:{value:t.inputForm.approval,callback:function(e){t.$set(t.inputForm,"approval",e)},expression:"inputForm.approval"}})],1),r("div",{staticClass:"submit"},["add"===t.formAction?r("q-btn",{staticClass:"q-mr-sm",attrs:{color:"primary",icon:"save","wait-for-ripple":"",disable:t.$v.inputForm.$invalid,label:t.$t("Save")},on:{click:t.addForm}}):t._e(),"update"===t.formAction?r("q-btn",{staticClass:"q-mr-sm",attrs:{color:"green",icon:"print","wait-for-ripple":"",disable:t.$v.inputForm.$invalid,label:t.$t("Print")},on:{click:t.printReport}}):t._e(),"update"===t.formAction?r("q-btn",{staticClass:"q-mr-sm",attrs:{color:"primary",icon:"save","wait-for-ripple":"",disable:t.$v.inputForm.$invalid,label:t.$t("Save")},on:{click:t.updateForm}}):t._e(),r("q-btn",{staticClass:"q-mr-sm",attrs:{color:"light",icon:"cancel","wait-for-ripple":"",label:t.$t("Cancel")},on:{click:function(e){t.formModal=!1}}})],1)],1)])])],1)},o=[];n._withStripped=!0;var i=r("3156"),a=r.n(i),c=(r("7514"),r("278c")),l=r.n(c),u=(r("ac6a"),r("551c"),r("96cf"),r("c973")),d=r.n(u),s=r("2f62"),p=r("f490"),m=r("676b"),f=r("fe5b"),b=r("cda9"),h=r("998d"),v=r("7266"),y=r("a62b"),g=r("b5ae"),$=r("44de"),F=r("05d8"),q=r("e499"),x=r.n(q),k=r("4ebb"),w=r.n(k);x.a.vfs=w.a.pdfMake.vfs,x.a.fonts={THSarabun:{normal:"THSarabun.ttf",bold:"THSarabun Bold.ttf",italics:"THSarabun Italic.ttf",bolditalics:"THSarabun Bold Italic.ttf"}};var _={name:"Purchase Order",mixins:[v["a"],$["a"],m["a"],f["a"],h["a"],b["a"],y["a"],F["a"]],data:function(){return{productAll:[],addProductCheck:!1,poProductTable:[],formAction2:null,filterProduct:"",formModal2:!1,pagination:{sortBy:"index",descending:!1},columns:[{name:".key",label:this.$t("ID"),field:".key",sortable:!0,align:"left"},{name:"index",label:this.$t("Index"),field:"index",sortable:!0,sort:function(t,e){return parseInt(t,10)-parseInt(e,10)},align:"left"},{name:"code",label:this.$t("Code"),field:"code",sortable:!0,align:"left"},{name:"description",label:this.$t("Description"),field:"description",sortable:!1,align:"left"},{name:"createdBy",label:this.$t("Created by"),field:"createdBy",sortable:!1,align:"left"}],columnsProduct:[{name:"id",label:this.$t("ID"),field:"id",sortable:!0,align:"left"},{name:"index",label:this.$t("index"),field:"ss",sortable:!0,align:"left"},{name:"productType",label:this.$t("productType"),field:"productType",sortable:!0,sort:function(t,e){return parseInt(t,10)-parseInt(e,10)},align:"left"},{name:"product",label:this.$t("Product"),field:"product",sortable:!0,align:"left"},{name:"qty",label:this.$t("Qty"),field:"qty",sortable:!0,align:"left"},{name:"price",label:this.$t("Price/Unit"),field:"price",sortable:!0,align:"left"},{name:"action",label:this.$t("Action"),field:"action",sortable:!0,align:"left"}],visibleColumnsProduct:["index","productType","product","qty","price","action"],visibleColumns:["index","code","description"],inputForm:{".key":null,index:null,code:null,stockType:null,supplier:null,productType:null,description:null,qty:null,createdBy:this.userId,approval:"waiting",createdOn:new Date,modifiedBy:this.userId,modifiedOn:new Date,totalPrice:0},productForm:{".key":null,product:null,productType:null,poId:null,qty:0},json_fields:{Code:"code",Description:"description"},json_data:[],json_meta:[[{key:"charset",value:"utf-8"}]]}},validations:{inputForm:{index:{required:g["required"],numeric:g["numeric"]},code:{required:g["required"]},productType:{required:g["required"]},supplier:{required:g["required"]},stockType:{required:g["required"]},qty:{required:g["required"],numeric:g["numeric"]},totalPrice:{required:g["required"],numeric:g["numeric"]}},productForm:{productType:{required:g["required"]},product:{required:g["required"]},qty:{required:g["required"],numeric:g["numeric"]}}},firestore:function(){return{po:this.$database.collection("po"),poProductDT:this.$database.collection("poProduct").where("poId","==",this.inputForm[".key"]),poProduct:this.$database.collection("poProduct")}},methods:{addForm:function(){var t=d()(regeneratorRuntime.mark(function t(){var e,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this,r="",e.inputForm.createdBy=e.inputForm.modifiedBy=e.userId,e.inputForm.createdOn=e.inputForm.modifiedOn=new Date,"approval"===e.inputForm.approval&&e.formAction,t.next=7,e.addProductProcess(e.$firestore.po,e.inputForm,e.$v.inputForm);case 7:r=t.sent,console.log(r);case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),openAddFormModel:function(t){var e=this;e.subHeading=e.$t("Add"),e.formAction="add",e.initialInputFormModel(),e.initialProductForm(),e.poProductTable=[],e.formModal=!0},initialInputFormModel:function(){var t=this;t.addProductCheck=!1,t.initialProductForm(),t.inputForm[".key"]=null,t.inputForm.index=null,t.inputForm.code=null,t.inputForm.stockType=null,t.inputForm.productType=null,t.inputForm.description=null,t.inputForm.qty=null,t.inputForm.createdBy=this.userId,t.inputForm.approval="waiting",t.inputForm.createdOn=new Date,t.inputForm.modifiedBy=this.userId,t.inputForm.modifiedOn=new Date,t.inputForm.totalPrice=0},initialProductForm:function(){var t=this;t.productForm[".key"]=null,t.productForm.product=null,t.productForm.productType=null,t.poId=null},getPo:function(){var t=this,e=[];return new Promise(function(r){t.$database.collection("po").get().then(function(t){return console.log(t),t.forEach(function(t){e.push({id:t.id,approval:t.data().approval,data:t.data()})}),console.log(e),r(e)})})},getPoProduct:function(t){var e=this;return new Promise(function(r){var n=e,o=1;if(n.poProductTable=[],console.log(n.selected.length),"update"===n.formAction||n.selected.length>0)return n.$database.collection("poProduct").where("poId","==",t).get().then(function(t){return console.log(t),t.forEach(function(t){n.poProductTable.push({id:t.id,data:t.data(),index:o,product:t.data().product,productType:t.data().productType,qty:t.data().qty,poId:t.data().poId}),o++}),r(n.poProductTable)}).catch(function(t){console.log(t)}),r(n.poProductTable)})},addProductProcess:function(t,e,r){var n=this;return new Promise(function(o){var i=n;if(r.$invalid)i.$q.notify({message:i.$t("Form validation error"),type:"nagative",icon:"error_outline"});else{var a={};for(var c in e)".key"!==c&&e.hasOwnProperty(c)&&(a[c]=e[c]);console.log(a),t.add(a).then(function(r){i.loadingState(t).then(function(t){var n=l()(t,2);return i.collectionSize=n[0],i.loading=n[1],i.poProductTable.forEach(function(t){i.$database.collection("poProduct").add({product:t.product,productType:t.productType,qty:t.qty,poId:r.id})}),i.formModal=!1,i.initialInputForm(e),i.$q.notify({message:i.$t("Form submitted successfully"),type:"positive",icon:"info"}),o(r.id)})}).catch(function(t){return i.$q.notify({message:i.$t("Error writing document"),type:"nagative",icon:"error_outline"}),console.error("Error writing document: ",t),o("")})}})},addProductForm:function(){var t=d()(regeneratorRuntime.mark(function t(){var e,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=this,r="","update"!==e.formAction){t.next=10;break}return e.productForm.poId=e.inputForm[".key"],t.next=6,e.addProcessProduct(e.$firestore.poProduct,e.productForm,e.$v.productForm);case 6:r=t.sent,console.log(r),t.next=11;break;case 10:e.poProductTable.push({id:"222",product:e.productForm.product,productType:e.productForm.productType,qty:e.productForm.qty});case 11:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),addProcessProduct:function(t,e,r){var n=this;return new Promise(function(o){var i=n;if(r.$invalid)i.$q.notify({message:i.$t("Form validation error"),type:"nagative",icon:"error_outline"});else{var a={};for(var c in e)".key"!==c&&e.hasOwnProperty(c)&&(a[c]=e[c]);t.add(a).then(function(r){i.loadingState(t).then(function(t){var n=l()(t,2);return i.collectionSize=n[0],i.loading=n[1],i.initialProductForm(e),i.getPoProduct(i.inputForm[".key"]),i.$q.notify({message:i.$t("Form submitted successfully"),type:"positive",icon:"info"}),o(r.id)})}).catch(function(t){return i.$q.notify({message:i.$t("Error writing document"),type:"nagative",icon:"error_outline"}),console.error("Error writing document: ",t),o("")})}})},updateForm:function(){var t=d()(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this,e.inputForm.modifiedBy=e.userId,e.inputForm.modifiedOn=new Date,t.next=5,e.updateProcess(e.$firestore.po,e.inputForm,e.$v.inputForm);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),deleteRow:function(){var t=d()(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this,t.next=3,e.deleteProcess(e.selected,e.$firestore.po);case 3:e.selected=[];case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),createExportData:function(){var t=this;t.$firestore.po.orderBy("code").get().then(function(e){e.forEach(function(e){t.json_data.push({code:e.data().code,description:e.data().description})})})},getProductList:function(t){var e=this,r=[];return new Promise(function(n){e.$database.collection("poProduct").where("poId","==",t).get().then(function(t){return console.log(t),t.forEach(function(t){r.push({id:t.id,product:t.data().product,data:t.data(),qty:t.data().qty})}),console.log(r),n(r)})})},addProduct:function(){var t=d()(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:console.log(this.poProductTable),this.addProductCheck=!0;case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),hideProduct:function(){this.addProductCheck=!1},getProduct:function(){var t=this,e=[];return new Promise(function(r){t.$database.collection("product").get().then(function(t){return console.log(t),t.forEach(function(t){e.push({id:t.id,price:t.data().buyIn,data:t.data()})}),console.log(e),r(e)})})},printReport:function(){var t=d()(regeneratorRuntime.mark(function t(){var e,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this,r=[],e.$q.loading.show(),t.next=5,e.getReportData();case 5:r=t.sent,e.$q.loading.hide(),x.a.createPdf(this.slipDocDefinition(r)).open();case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),slipDocDefinition:function(t){var e={pageSize:"A4",pageOrientation:"portrait",defaultStyle:{font:"THSarabun"},content:[t],styles:{title:{fontSize:24,bold:!0,margin:[5,5,5,5]},header:{fontSize:16,bold:!0,margin:[5,5,5,5]},subheader:{fontSize:14,bold:!0,margin:[5,5,5,5]},tableHeader:{fontSize:14,bold:!0,fillColor:"#dddddd",margin:[5,5,5,5]},body:{fontSize:14,bold:!0,margin:[5,5,5,5]},body1:{fontSize:14,bold:!0,fillColor:"#dddddd",margin:[5,5,5,5]},body2:{fontSize:14,bold:!0,fillColor:"#c0c0c0",margin:[5,5,5,5]},alignRight:{alignment:"right"},alignRightUnderline:{alignment:"right",bold:!0}}};return e},getReportData:function(){var t=d()(regeneratorRuntime.mark(function t(){var e,r=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getProductList(this.inputForm[".key"]);case 2:return e=t.sent,t.abrupt("return",new Promise(function(t){var n=r;console.log(n.stockTypeOptions);var o=[],i=[];n.$database.collection("po").doc(n.inputForm[".key"]).get().then(function(r){i.push([n.$t("ลำดับที่"),n.$t("ชื่อสินค้า"),n.$t("จำนวน"),n.$t("ราคาต่อหน่วย"),n.$t("รวม")]);var a=1,c=0,l=0;e.forEach(function(t){l=n._.find(n.productOptions,{id:t.product}).data.buyIn,c+=n._.find(n.productOptions,{id:t.product}).data.buyIn*t.qty,i.push([{text:a,alignment:"center",border:[!0,!1,!0,!1]},{text:"".concat(n._.find(n.productOptions,{id:t.product}).data.description),alignment:"left",border:[!0,!1,!0,!1]},{text:"".concat(t.qty),alignment:"center",border:[!0,!1,!0,!1]},{text:"".concat(l.toLocaleString(void 0,{minimumFractionDigits:2})),alignment:"right",border:[!0,!1,!0,!1]},{text:"".concat((l*t.qty).toLocaleString(void 0,{minimumFractionDigits:2})),alignment:"right",border:[!0,!1,!0,!1]}]),a++});for(var u=0;u<39;u++)i.push([{text:"",alignment:"left",border:[!0,!1,!0,!1]},{text:"",alignment:"left",border:[!0,!1,!0,!1]},{text:"",alignment:"left",border:[!0,!1,!0,!1]},{text:"",alignment:"left",border:[!0,!1,!0,!1]},{text:"",alignment:"left",border:[!0,!1,!0,!1]}]);i.push([{text:"หมายเหตุ\n"+r.data().description,alignment:"center",colSpan:2,rowSpan:2},{text:"",alignment:"left"},{text:"รวมเป็นเงิน",alignment:"center",colSpan:2},{text:"",alignment:"left"},{text:"".concat(c.toLocaleString(void 0,{minimumFractionDigits:2})),alignment:"right"}],[{text:"",alignment:"center"},{text:"",alignment:"left"},{text:"ภาษี 7%",alignment:"center",colSpan:2},{text:"",alignment:"left"},{text:"".concat((.07*c).toLocaleString(void 0,{minimumFractionDigits:2})),alignment:"right"}],[{text:"("+n.$ThaiBaht(1.07*c)+")",colSpan:2,alignment:"center"},{text:"",alignment:"left"},{text:"รวมเป็นเงินสุทธิ",alignment:"center",colSpan:2},{text:"",alignment:"left"},{text:"".concat((1.07*c).toLocaleString(void 0,{minimumFractionDigits:2})),alignment:"right"}]),o.push({text:"".concat(n.applicationName),style:"header",alignment:"center"}),o.push({text:"ใบสั่งซื้อ",style:"header",alignment:"center"});var d=n._.find(n.supplierOptions,{id:r.data().supplier}),s=n._.find(n.authUserOptions,{id:r.data().createdBy}).label;return o.push([{text:"วันที่ทำรายการ: "+p["d"].formatDate(r.data().createdOn,"DD/MM/YYYY"),fontSize:16,alignment:"right"}],[{text:"เลขที่ใบคำสั่งซื้อ: "+r.data().code,fontSize:16,alignment:"right"}],[{text:"ชื่อผู้ทำรายการ: "+s,fontSize:16,alignment:"left"}],[{text:"ชื่อผู้ขาย: "+d.data.suppName,fontSize:16,alignment:"left"}],[{text:"ที่อยู่: "+d.data.suppAddress,fontSize:16,alignment:"left"}],[{text:"\n รายการสินค้า",fontSize:16,alignment:"center"}]),o.push({table:{headerRows:1,widths:[30,280,50,50,50],body:i}}),o.push([{text:"หมายเหต",fontSize:16,bold:!0,alignment:"left"}],[{text:"1). โปรดระบุใบสั่งซื้อข้างต้นในใบสั่งของทุกฉบับ",fontSize:16,alignment:"left"}],[{text:"2). การวางบิลและรับเช็ค เป็นไปตามที่บริษัทกำหนดไว้                                               ___________________",fontSize:16,alignment:"left"}],[{text:"3). ในการวางบิลเพื่อเรียกเก็บ ให้แนบสำเนาใบสั่งซื้อกำกับมาด้วย                                         ผู้มีอำนาจลงนาม",fontSize:16,alignment:"left"}]),t(o)})}));case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},created:function(){var t=d()(regeneratorRuntime.mark(function t(){var e,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.loadingState(this.$firestore.po);case 2:return e=t.sent,r=l()(e,2),this.collectionSize=r[0],this.loading=r[1],this.initialInputForm(this.inputForm),this.createExportData(),t.next=10,this.getProduct();case 10:this.productAll=t.sent,console.log(this.productAll);case 12:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),computed:a()({},Object(s["c"])(["userId","applicationName"])),watch:{"inputForm.product":function(){var t=this,e=0;if(t.inputForm.product){var r=t._.find(t.productAll,{id:t.inputForm.product}).price;console.log(r),e=r*t.inputForm.qty,t.inputForm.totalPrice=e}},"inputForm.qty":function(){var t=this,e=0;if(t.inputForm.product){var r=t._.find(t.productAll,{id:t.inputForm.product}).price;console.log(r),e=r*t.inputForm.qty,t.inputForm.totalPrice=e}},selected:function(){var t=d()(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getPoProduct(this.selected[0][".key"]);case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},P=_,T=(r("eeb3"),r("2877")),S=Object(T["a"])(P,n,o,!1,null,null,null);S.options.__file="po.vue";e["default"]=S.exports},"676b":function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div")},o=[];n._withStripped=!0;r("ac6a");var i={data:function(){return{stockTypeOptions:[]}},created:function(){var t=this;t.$database.collection("stockType").orderBy("index").get().then(function(e){e.forEach(function(e){t.stockTypeOptions.push({id:e.id,data:e.data(),code:e.data().code,value:e.id,label:"".concat(e.data().code)})})})}},a=i,c=r("2877"),l=Object(c["a"])(a,n,o,!1,null,null,null);l.options.__file="stockTypeOptions.vue";e["a"]=l.exports},7266:function(t,e,r){"use strict";var n,o,i=r("3156"),a=r.n(i),c=r("2f62"),l={methods:{hasPermission:function(t){var e=this._.uniq(this.userPermission),r=this._.intersection(e,t).length;return r}},computed:a()({},Object(c["c"])(["userPermission"]))},u=l,d=r("2877"),s=Object(d["a"])(u,n,o,!1,null,null,null);s.options.__file="hasPermission.vue";e["a"]=s.exports},"998d":function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div")},o=[];n._withStripped=!0;r("ac6a");var i={data:function(){return{supplierOptions:[]}},created:function(){var t=this;t.$database.collection("supplier").get().then(function(e){e.forEach(function(e){t.supplierOptions.push({id:e.id,data:e.data(),code:e.data().code,value:e.id,label:"".concat(e.data().suppName)})})})}},a=i,c=r("2877"),l=Object(c["a"])(a,n,o,!1,null,null,null);l.options.__file="supplierOptions.vue";e["a"]=l.exports},a62b:function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div")},o=[];n._withStripped=!0;r("ac6a");var i={data:function(){return{productTypeOptions:[]}},created:function(){var t=this;t.$database.collection("productType").orderBy("index").get().then(function(e){e.forEach(function(e){t.productTypeOptions.push({id:e.id,data:e.data(),code:e.data().code,value:e.id,label:"".concat(e.data().code)})})})}},a=i,c=r("2877"),l=Object(c["a"])(a,n,o,!1,null,null,null);l.options.__file="productTypeOptions.vue";e["a"]=l.exports},cda9:function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div")},o=[];n._withStripped=!0;r("ac6a");var i={data:function(){return{productOptions:[]}},created:function(){var t=this;t.$database.collection("product").orderBy("index").get().then(function(e){e.forEach(function(e){t.productOptions.push({id:e.id,data:e.data(),code:e.data().code,value:e.id,label:"".concat(e.data().code," : ").concat(e.data().description)})})})}},a=i,c=r("2877"),l=Object(c["a"])(a,n,o,!1,null,null,null);l.options.__file="productOptions.vue";e["a"]=l.exports},eeb3:function(t,e,r){"use strict";var n=r("2bab"),o=r.n(n);o.a},fe5b:function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div")},o=[];n._withStripped=!0;r("96cf");var i=r("c973"),a=r.n(i),c=(r("ac6a"),r("551c"),{data:function(){return{authUserOptions:[]}},methods:{getAuthUserOptions:function(){var t=this;return new Promise(function(e){var r=t,n=[];r.$database.collection("authUser").orderBy("firstName").get().then(function(t){return t.forEach(function(t){n.push({id:t.id,data:t.data(),value:t.id,label:"".concat(t.data().firstName," ").concat(t.data().lastName),model:!1})}),e(n)}).catch(function(t){console.log(t)})})}},created:function(){var t=a()(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this,t.next=3,e.getAuthUserOptions();case 3:e.authUserOptions=t.sent;case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}),l=c,u=r("2877"),d=Object(u["a"])(l,n,o,!1,null,null,null);d.options.__file="authUserOptions.vue";e["a"]=d.exports}}]);