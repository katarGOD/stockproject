(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["58df776f"],{"05d8":function(e,t,n){"use strict";var r,a,o={data:function(){return{labelWidth:3}}},i=o,s=n("2877"),u=Object(s["a"])(i,r,a,!1,null,null,null);u.options.__file="publicVars.vue";t["a"]=u.exports},1331:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("78ef"),a=(0,r.regex)("integer",/^-?[0-9]*$/);t.default=a},2508:function(e,t,n){"use strict";var r,a,o=n("f490"),i={methods:{FormatDate:function(e,t){var n=o["d"].formatDate(e,t);return n}}},s=i,u=n("2877"),l=Object(u["a"])(s,r,a,!1,null,null,null);l.options.__file="formatDate.vue";t["a"]=l.exports},"251a":function(e,t,n){"use strict";n("ac6a"),n("3b2b");var r,a,o=n("7037"),i=n.n(o),s=(n("6b54"),n("f5766"),n("551c"),{data:function(){return{collapseState:""}},methods:{convertImgToBase64:function(e,t,n){var r=new Image;r.crossOrigin="Anonymous",r.onload=function(){var e=document.createElement("CANVAS"),r=e.getContext("2d");e.height=this.height,e.width=this.width,r.drawImage(this,0,0);var a=e.toDataURL(n||"image/png");t(a),e=null},r.src=e},simulateDelay:function(e){return new Promise(function(t){setTimeout(function(){return t(!0)},e)})},toggleCollapse:function(){""===this.collapseState?this.collapseState="bg-white inset-shadow":this.collapseState=""},convertMinuite2TimeDuration:function(e){var t=e%60,n=(e-t)/60,r="".concat(n.toString().padStart(2,"0"),":").concat(t.toString().padStart(2,"0"));return r},isString:function(e){return"string"===typeof e||e instanceof String},isNumber:function(e){return"number"===typeof e&&isFinite(e)},isArray:function(e){return e&&"object"===i()(e)&&e.constructor===Array},isFunction:function(e){return"function"===typeof e},isObject:function(e){return e&&"object"===i()(e)&&e.constructor===Object},isNull:function(e){return null===e},isUndefined:function(e){return"undefined"===typeof e},isBoolean:function(e){return"boolean"===typeof e},isRegExp:function(e){return e&&"object"===i()(e)&&e.constructor===RegExp},isError:function(e){return e instanceof Error&&"undefined"!==typeof e.message},isDate:function(e){return e instanceof Date},isSymbol:function(e){return"symbol"===i()(e)},getContent:function(e,t){var n=this;return new Promise(function(r){var a=n,o=[];a.$database.collection("contents").where("group","==",e).where("locale","==",t).get().then(function(e){return e.forEach(function(e){o.push({code:e.data().code,body:e.data().body})}),r(o)})})}}}),u=s,l=n("2877"),d=Object(l["a"])(u,r,a,!1,null,null,null);d.options.__file="publicFunc.vue";t["a"]=d.exports},"2a12":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("78ef"),a=function(e){return(0,r.withParams)({type:"maxLength",max:e},function(t){return!(0,r.req)(t)||(0,r.len)(t)<=e})};t.default=a},"2e08":function(e,t,n){var r=n("9def"),a=n("9744"),o=n("be13");e.exports=function(e,t,n,i){var s=String(o(e)),u=s.length,l=void 0===n?" ":String(n),d=r(t);if(d<=u||""==l)return s;var c=d-u,f=a.call(l,Math.ceil(c/l.length));return f.length>c&&(f=f.slice(0,c)),i?f+s:s+f}},3360:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("78ef"),a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.withParams)({type:"and"},function(){for(var e=this,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t.length>0&&t.reduce(function(t,n){return t&&n.apply(e,r)},!0)})};t.default=a},"3a54":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("78ef"),a=(0,r.regex)("alphaNum",/^[a-zA-Z0-9]*$/);t.default=a},"3b2b":function(e,t,n){var r=n("7726"),a=n("5dbce"),o=n("86cc").f,i=n("9093").f,s=n("aae3"),u=n("0bfb"),l=r.RegExp,d=l,c=l.prototype,f=/a/g,m=/a/g,p=new l(f)!==f;if(n("9e1e")&&(!p||n("79e5")(function(){return m[n("2b4c")("match")]=!1,l(f)!=f||l(m)==m||"/a/i"!=l(f,"i")}))){l=function(e,t){var n=this instanceof l,r=s(e),o=void 0===t;return!n&&r&&e.constructor===l&&o?e:a(p?new d(r&&!o?e.source:e,t):d((r=e instanceof l)?e.source:e,r&&o?u.call(e):t),n?this:c,l)};for(var v=function(e){e in l||o(l,e,{configurable:!0,get:function(){return d[e]},set:function(t){d[e]=t}})},y=i(d),h=0;y.length>h;)v(y[h++]);c.constructor=l,l.prototype=c,n("2aba")(r,"RegExp",l)}n("7a56")("RegExp")},"44de":function(e,t,n){"use strict";n("ac6a");var r,a,o=n("278c"),i=n.n(o),s=(n("551c"),n("251a")),u={name:"crudProcess",mixins:[s["a"]],data:function(){return{subHeading:null,formAction:null,selected:[],filter:"",collectionSize:0,loading:!0,formModal:!1}},methods:{loadingState:function(e){return new Promise(function(t){var n={};e.get().then(function(e){return n=[e.size,!1],t(n)})})},initialInputForm:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;for(var r in e)if(t){if(e.hasOwnProperty(r)){if(n.isObject(e[r])){var a={};for(var o in e[r])n.isString(e[r][o])?a[o]="":n.isNumber(e[r][o])?a[o]=0:n.isArray(e[r][o])?a[o]=[]:n.isBoolean(e[r][o])?a[o]=!1:n.isDate(e[r][o])?a[o]=new Date:n.isNull(e[r][o])?a[o]="":n.isUndefined(e[r][o])?a[o]="":a[o]=e[r][o];e[r]=a}else n.isString(e[r])?e[r]="":n.isNumber(e[r])?e[r]=0:n.isArray(e[r])?e[r]=[]:n.isBoolean(e[r])?e[r]=!1:n.isDate(e[r])?e[r]=new Date:n.isNull(e[r])?e[r]="":n.isUndefined(e[r])&&(e[r]="");"index"===r&&(e[r]=n.collectionSize+1)}}else if(e.hasOwnProperty(r)){if(n.isObject(e[r])){var i={};for(var s in e[r])n.isNull(e[r][s])?i[s]="":n.isUndefined(e[r][s])?i[s]="":i[s]=e[r][s];e[r]=i}n.isNull(e[r])&&(e[r]=""),n.isUndefined(e[r])&&(e[r]=""),"index"===r&&(e[r]=n.collectionSize+1)}},openAddForm:function(e){var t=this;t.subHeading=t.$t("Add"),t.formAction="add",t.initialInputForm(e,!0),t.formModal=!0},openUpdateFrom:function(e,t){var n=this;for(var r in n.subHeading=n.$t("Update"),n.formAction="update",e)e.hasOwnProperty(r)&&(e[r]=t[r]);n.formModal=!0},setProcess:function(e,t,n,r){var a=this;return new Promise(function(o){var s=a;if(n.$invalid)s.$q.notify({message:s.$t("Form validation error"),type:"nagative",icon:"error_outline"});else{var u={};for(var l in t)t.hasOwnProperty(l)&&".key"!==l&&(u[l]=t[l]);e.doc(r).set(u).then(function(){s.selected=[],s.loadingState(e).then(function(e){var n=i()(e,2);s.collectionSize=n[0],s.loading=n[1],s.formModal=!1,s.initialInputForm(t)}),s.$q.notify({message:s.$t("Form submitted successfully"),type:"positive",icon:"info"})}).catch(function(e){s.$q.notify({message:s.$t("Error writing document"),type:"nagative",icon:"error_outline"}),console.error("Error writing document: ",e)})}return o(!0)})},decreaseIndex:function(e,t){t.doc(e.row[".key"]).update({index:parseInt(e.row.index)-parseInt(1)})},increaseIndex:function(e,t){t.doc(e.row[".key"]).update({index:parseInt(e.row.index)+parseInt(1)})},addProcess:function(e,t,n){var r=this;return new Promise(function(a){var o=r;if(n.$invalid)o.$q.notify({message:o.$t("Form validation error"),type:"nagative",icon:"error_outline"});else{var s={};for(var u in t)".key"!==u&&t.hasOwnProperty(u)&&(s[u]=t[u]);e.add(s).then(function(n){o.loadingState(e).then(function(e){var r=i()(e,2);return o.collectionSize=r[0],o.loading=r[1],o.formModal=!1,o.initialInputForm(t),o.$q.notify({message:o.$t("Form submitted successfully"),type:"positive",icon:"info"}),a(n.id)})}).catch(function(e){return o.$q.notify({message:o.$t("Error writing document"),type:"nagative",icon:"error_outline"}),console.error("Error writing document: ",e),a("")})}})},updateProcess:function(e,t,n){var r=this;return new Promise(function(a){var o=r;if(n.$invalid)o.$q.notify({message:o.$t("Form validation error"),type:"nagative",icon:"error_outline"});else{var s={};for(var u in t)t.hasOwnProperty(u)&&".key"!==u&&(s[u]=t[u]);e.doc(t[".key"]).update(s).then(function(){o.selected=[],o.loadingState(e).then(function(e){var t=i()(e,2);o.collectionSize=t[0],o.loading=t[1]}),o.formModal=!1,o.initialInputForm(t),o.$q.notify({message:o.$t("Form submitted successfully"),type:"positive",icon:"info"})}).catch(function(e){o.$q.notify({message:o.$t("Error writing document"),type:"nagative",icon:"error_outline"}),console.error("Error writing document: ",e)})}return a(!0)})},deleteProcess:function(e,t){var n=this;return new Promise(function(r){var a=n;a.$q.dialog({title:a.$t("Confirm"),message:a.$t("Are you sure you want to delete these records?"),ok:a.$t("Confirm"),cancel:a.$t("Cancel"),preventClose:!0}).then(function(){return e.forEach(function(n){t.doc(n[".key"]).delete().then(function(){a._.without(e,n),a.loadingState(t).then(function(e){var t=i()(e,2);a.collectionSize=t[0],a.loading=t[1]}),a.$q.notify({message:"".concat(a.$t("Delete was successful")," : ").concat(n[".key"]),type:"positive",icon:"info"})}).catch(function(e){console.error("Error removing document: ",e)})}),r(!0)}).catch(function(){a.$q.notify({message:a.$t("Cancel"),type:"nagative",icon:"error_outline"})})})}}},l=u,d=n("2877"),c=Object(d["a"])(l,r,a,!1,null,null,null);c.options.__file="crudProcess.vue";t["a"]=c.exports},"45b8":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("78ef"),a=(0,r.regex)("numeric",/^[0-9]*$/);t.default=a},"46bc":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("78ef"),a=function(e){return(0,r.withParams)({type:"maxValue",max:e},function(t){return!(0,r.req)(t)||(!/\s/.test(t)||t instanceof Date)&&+t<=+e})};t.default=a},51476:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},a=[];r._withStripped=!0;n("96cf");var o=n("c973"),i=n.n(o),s=(n("ac6a"),n("551c"),{data:function(){return{absenceTypeOptions:[]}},methods:{getAbsenceTypeOptions:function(){var e=this;return new Promise(function(t){var n=e,r=[];n.$database.collection("leaveAndAbsenceTypes").orderBy("index").get().then(function(e){return e.forEach(function(e){r.push({value:e.id,index:e.data().index,label:e.data().description,id:e.id,code:e.data().code,entitlement:e.data().entitlement,data:e.data()})}),t(r)}).catch(function(e){console.log(e)})})}},created:function(){var e=i()(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this,e.next=3,t.getAbsenceTypeOptions();case 3:t.absenceTypeOptions=e.sent;case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}),u=s,l=n("2877"),d=Object(l["a"])(u,r,a,!1,null,null,null);d.options.__file="absenceTypeOptions.vue";t["a"]=d.exports},"5d75":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("78ef"),a=/(^$|^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$)/,o=(0,r.regex)("email",a);t.default=o},"5db3":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("78ef"),a=function(e){return(0,r.withParams)({type:"minLength",min:e},function(t){return!(0,r.req)(t)||(0,r.len)(t)>=e})};t.default=a},6235:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("78ef"),a=(0,r.regex)("alpha",/^[a-zA-Z]*$/);t.default=a},6417:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("78ef"),a=function(e){return(0,r.withParams)({type:"not"},function(t,n){return!(0,r.req)(t)||!e.call(this,t,n)})};t.default=a},"772d":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("78ef"),a=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[/?#]\S*)?$/i,o=(0,r.regex)("url",a);t.default=o},"78ef":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"withParams",{enumerable:!0,get:function(){return r.default}}),t.regex=t.ref=t.len=t.req=void 0;var r=a(n("8750"));function a(e){return e&&e.__esModule?e:{default:e}}function o(e){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var i=function(e){if(Array.isArray(e))return!!e.length;if(void 0===e||null===e)return!1;if(!1===e)return!0;if(e instanceof Date)return!isNaN(e.getTime());if("object"===o(e)){for(var t in e)return!0;return!1}return!!String(e).length};t.req=i;var s=function(e){return Array.isArray(e)?e.length:"object"===o(e)?Object.keys(e).length:String(e).length};t.len=s;var u=function(e,t,n){return"function"===typeof e?e.call(t,n):n[e]};t.ref=u;var l=function(e,t){return(0,r.default)({type:e},function(e){return!i(e)||t.test(e)})};t.regex=l},8750:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="web"===Object({NODE_ENV:"production",CLIENT:!0,SERVER:!1,DEV:!1,PROD:!0,THEME:"mat",MODE:"spa",VUE_ROUTER_MODE:"history",VUE_ROUTER_BASE:"/",APP_URL:"undefined"}).BUILD?n("cb69").withParams:n("0234").withParams,a=r;t.default=a},"91d3":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("78ef"),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:":";return(0,r.withParams)({type:"macAddress"},function(t){if(!(0,r.req)(t))return!0;if("string"!==typeof t)return!1;var n="string"===typeof e&&""!==e?t.split(e):12===t.length||16===t.length?t.match(/.{2}/g):null;return null!==n&&(6===n.length||8===n.length)&&n.every(o)})};t.default=a;var o=function(e){return e.toLowerCase().match(/^[0-9a-f]{2}$/)}},9744:function(e,t,n){"use strict";var r=n("4588"),a=n("be13");e.exports=function(e){var t=String(a(this)),n="",o=r(e);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},a274:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},a=[];r._withStripped=!0;n("ac6a");var o=n("f490"),i={data:function(){return{yearOptions:[]}},created:function(){var e=this,t=o["d"].formatDate(Date.now(),"YYYY");this.$database.collection("initialSetup").where("code","==","_STSY").get().then(function(n){n.forEach(function(n){var r=n.data().value;e._.range(parseInt(r),parseInt(t)+4).forEach(function(t){e.yearOptions.push({value:t,label:"".concat(t)})})})})}},s=i,u=n("2877"),l=Object(u["a"])(s,r,a,!1,null,null,null);l.options.__file="yearOptions.vue";t["a"]=l.exports},aa82:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("78ef"),a=function(e){return(0,r.withParams)({type:"requiredIf",prop:e},function(t,n){return!(0,r.ref)(e,this,n)||(0,r.req)(t)})};t.default=a},b5ae:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"alpha",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"alphaNum",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"numeric",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"between",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"email",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"ipAddress",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"macAddress",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"maxLength",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"minLength",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"required",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"requiredIf",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"requiredUnless",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"sameAs",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"url",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"or",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"and",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"not",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(t,"minValue",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(t,"maxValue",{enumerable:!0,get:function(){return F.default}}),Object.defineProperty(t,"integer",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(t,"decimal",{enumerable:!0,get:function(){return D.default}}),t.helpers=void 0;var r=O(n("6235")),a=O(n("3a54")),o=O(n("45b8")),i=O(n("ec11")),s=O(n("5d75")),u=O(n("c99d")),l=O(n("91d3")),d=O(n("2a12")),c=O(n("5db3")),f=O(n("d4f4")),m=O(n("aa82")),p=O(n("e652")),v=O(n("b6cb")),y=O(n("772d")),h=O(n("d294")),g=O(n("3360")),b=O(n("6417")),_=O(n("eb66")),F=O(n("46bc")),w=O(n("1331")),D=O(n("c301")),q=H(n("78ef"));function H(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function O(e){return e&&e.__esModule?e:{default:e}}t.helpers=q},b6cb:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("78ef"),a=function(e){return(0,r.withParams)({type:"sameAs",eq:e},function(t,n){return t===(0,r.ref)(e,this,n)})};t.default=a},c301:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("78ef"),a=(0,r.regex)("decimal",/^[-]?\d*(\.\d+)?$/);t.default=a},c99d:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("78ef"),a=(0,r.withParams)({type:"ipAddress"},function(e){if(!(0,r.req)(e))return!0;if("string"!==typeof e)return!1;var t=e.split(".");return 4===t.length&&t.every(o)});t.default=a;var o=function(e){if(e.length>3||0===e.length)return!1;if("0"===e[0]&&"0"!==e)return!1;if(!e.match(/^\d+$/))return!1;var t=0|+e;return t>=0&&t<=255}},cb69:function(e,t,n){"use strict";(function(e){function n(e){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.withParams=void 0;var r="undefined"!==typeof window?window:"undefined"!==typeof e?e:{},a=function(e,t){return"object"===n(e)&&void 0!==t?t:e(function(){})},o=r.vuelidate?r.vuelidate.withParams:a;t.withParams=o}).call(this,n("c8ba"))},cc7f:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-page",[n("q-card",{staticStyle:{"margin-bottom":"5px"}},[n("q-card-title",[n("p",{staticClass:"q-headline"},[e._v(e._s(e.$t(e.$changeCase.sentenceCase(e.$options.name))))]),n("span",{attrs:{slot:"right"},slot:"right"},[n("q-field",{staticStyle:{width:"200px"},attrs:{"label-width":6,label:e.$t("Year (C.E.)")}},[n("q-select",{attrs:{options:e.yearOptions},model:{value:e.filterByYear,callback:function(t){e.filterByYear=t},expression:"filterByYear"}})],1)],1)])],1),n("q-table",{attrs:{"row-key":".key",selection:"single",columns:e.leaveRequestColumns,data:e.leaveRequestDatatable,filter:e.filter,loading:e.loading,pagination:e.leaveRequestPagination,selected:e.selected,"visible-columns":e.leaveRequestVisibleColumns},on:{"update:pagination":function(t){e.leaveRequestPagination=t},"update:selected":function(t){e.selected=t}},scopedSlots:e._u([{key:"top-selection",fn:function(t){return[n("div",{staticStyle:{"padding-top":"8px","padding-bottom":"8px"}},[1==e.selected.length?n("q-btn",{staticClass:"q-mr-sm",attrs:{color:"primary",icon:"edit",round:""},on:{click:function(t){e.iOpenUpdateFrom()}}}):e._e(),n("q-btn",{staticClass:"q-mr-sm",attrs:{color:"negative",icon:"delete",round:""},on:{click:function(t){e.deleteRow()}}})],1)]}},{key:"top-left",fn:function(t){return[n("q-btn",{staticClass:"q-mr-sm",attrs:{color:"secondary",icon:"add_circle",round:""},on:{click:function(t){e.iOpenAddForm()}}}),n("q-search",{attrs:{"hide-underline":"",color:"secondary"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]}},{key:"top-right",fn:function(t){return[n("q-table-columns",{staticClass:"q-mr-sm",attrs:{color:"secondary",columns:e.leaveRequestColumns},model:{value:e.leaveRequestVisibleColumns,callback:function(t){e.leaveRequestVisibleColumns=t},expression:"leaveRequestVisibleColumns"}})]}},{key:"body-cell-absenceType",fn:function(t){return n("q-td",{attrs:{props:t}},[n("q-btn",{attrs:{flat:"",label:e._.find(e.absenceTypeOptions,{value:t.value})?e._.find(e.absenceTypeOptions,{value:t.value}).label:"AbsenceType"},on:{click:function(n){e.selected=[e._.find(e.leaveRequestDatatable,{".key":t.row[".key"]})],e.iOpenUpdateFrom()}}})],1)}},{key:"body-cell-datesRequestedFrom",fn:function(t){return n("q-td",{attrs:{props:t}},[e._v("\n      "+e._s(e.FormatDate(t.value,"ddd, DD MMM YYYY HH:mm"))+"\n    ")])}},{key:"body-cell-datesRequestedTo",fn:function(t){return n("q-td",{attrs:{props:t}},[e._v("\n      "+e._s(e.FormatDate(t.value,"ddd, DD MMM YYYY HH:mm"))+"\n    ")])}},{key:"body-cell-approval",fn:function(t){return n("q-td",{attrs:{props:t}},[t.value?n("q-chip",{attrs:{icon:"check",color:"positive"}},[e._v("\n        "+e._s(e.$t("Approved"))+"\n      ")]):n("q-chip",{attrs:{icon:"clear",color:"warning"}},[e._v("\n        "+e._s(e.$t("Waiting"))+"\n      ")])],1)}}])}),n("q-modal",{attrs:{maximized:"","content-css":{padding:"25px"}},model:{value:e.formModal,callback:function(t){e.formModal=t},expression:"formModal"}},[n("div",{staticClass:"row",staticStyle:{"padding-bottom":"25px"}},[n("div",{staticClass:"col"},[n("q-table",{attrs:{"row-key":"name",selection:"none",columns:e.myRosterColumns,data:e.myRosterDatatable,filter:e.filter,"visible-columns":e.myRosterVisibleColumns},scopedSlots:e._u([{key:"body",fn:function(t){return[n("q-tr",{attrs:{props:t}},["ws"===t.row.type?[n("q-td",{key:"day1",staticStyle:{"vertical-align":"top"},attrs:{props:t}},[t.row.day1.length?n("div",e._l(t.row.day1,function(t){return n("div",{key:t.id},["overTime"==t.type?[e._v("\n                        "+e._s("OT :"+e.FormatDate(t.start,"HH:mm"))+" - "+e._s(e.FormatDate(t.end,"HH:mm"))+"\n                      ")]:[e._v("\n                        "+e._s(e.FormatDate(t.start,"HH:mm"))+" - "+e._s(e.FormatDate(t.end,"HH:mm"))+"\n                      ")]],2)})):n("div",{staticClass:"text-red"},[e._v("\n                    "+e._s(e.$t("OFF"))+"\n                  ")])]),n("q-td",{key:"day2",staticStyle:{"vertical-align":"top"},attrs:{props:t}},[t.row.day2.length?n("div",e._l(t.row.day2,function(t){return n("div",{key:t.id},["overTime"==t.type?[e._v("\n                        "+e._s("OT :"+e.FormatDate(t.start,"HH:mm"))+" - "+e._s(e.FormatDate(t.end,"HH:mm"))+"\n                      ")]:[e._v("\n                        "+e._s(e.FormatDate(t.start,"HH:mm"))+" - "+e._s(e.FormatDate(t.end,"HH:mm"))+"\n                      ")]],2)})):n("div",{staticClass:"text-red"},[e._v("\n                    "+e._s(e.$t("OFF"))+"\n                  ")])]),n("q-td",{key:"day3",staticStyle:{"vertical-align":"top"},attrs:{props:t}},[t.row.day3.length?n("div",e._l(t.row.day3,function(t){return n("div",{key:t.id},["overTime"==t.type?[e._v("\n                        "+e._s("OT :"+e.FormatDate(t.start,"HH:mm"))+" - "+e._s(e.FormatDate(t.end,"HH:mm"))+"\n                      ")]:[e._v("\n                        "+e._s(e.FormatDate(t.start,"HH:mm"))+" - "+e._s(e.FormatDate(t.end,"HH:mm"))+"\n                      ")]],2)})):n("div",{staticClass:"text-red"},[e._v("\n                    "+e._s(e.$t("OFF"))+"\n                  ")])]),n("q-td",{key:"day4",staticStyle:{"vertical-align":"top"},attrs:{props:t}},[t.row.day4.length?n("div",e._l(t.row.day4,function(t){return n("div",{key:t.id},["overTime"==t.type?[e._v("\n                        "+e._s("OT :"+e.FormatDate(t.start,"HH:mm"))+" - "+e._s(e.FormatDate(t.end,"HH:mm"))+"\n                      ")]:[e._v("\n                        "+e._s(e.FormatDate(t.start,"HH:mm"))+" - "+e._s(e.FormatDate(t.end,"HH:mm"))+"\n                      ")]],2)})):n("div",{staticClass:"text-red"},[e._v("\n                    "+e._s(e.$t("OFF"))+"\n                  ")])]),n("q-td",{key:"day5",staticStyle:{"vertical-align":"top"},attrs:{props:t}},[t.row.day5.length?n("div",e._l(t.row.day5,function(t){return n("div",{key:t.id},["overTime"==t.type?[e._v("\n                        "+e._s("OT :"+e.FormatDate(t.start,"HH:mm"))+" - "+e._s(e.FormatDate(t.end,"HH:mm"))+"\n                      ")]:[e._v("\n                        "+e._s(e.FormatDate(t.start,"HH:mm"))+" - "+e._s(e.FormatDate(t.end,"HH:mm"))+"\n                      ")]],2)})):n("div",{staticClass:"text-red"},[e._v("\n                    "+e._s(e.$t("OFF"))+"\n                  ")])]),n("q-td",{key:"day6",staticStyle:{"vertical-align":"top"},attrs:{props:t}},[t.row.day6.length?n("div",e._l(t.row.day6,function(t){return n("div",{key:t.id},["overTime"==t.type?[e._v("\n                        "+e._s("OT :"+e.FormatDate(t.start,"HH:mm"))+" - "+e._s(e.FormatDate(t.end,"HH:mm"))+"\n                      ")]:[e._v("\n                        "+e._s(e.FormatDate(t.start,"HH:mm"))+" - "+e._s(e.FormatDate(t.end,"HH:mm"))+"\n                      ")]],2)})):n("div",{staticClass:"text-red"},[e._v("\n                    "+e._s(e.$t("OFF"))+"\n                  ")])]),n("q-td",{key:"day7",staticStyle:{"vertical-align":"top"},attrs:{props:t}},[t.row.day7.length?n("div",e._l(t.row.day7,function(t){return n("div",{key:t.id},["overTime"==t.type?[e._v("\n                        "+e._s("OT :"+e.FormatDate(t.start,"HH:mm"))+" - "+e._s(e.FormatDate(t.end,"HH:mm"))+"\n                      ")]:[e._v("\n                        "+e._s(e.FormatDate(t.start,"HH:mm"))+" - "+e._s(e.FormatDate(t.end,"HH:mm"))+"\n                      ")]],2)})):n("div",{staticClass:"text-red"},[e._v("\n                    "+e._s(e.$t("OFF"))+"\n                  ")])]),n("q-td",{key:"day8",staticStyle:{"vertical-align":"top"},attrs:{props:t}},[t.row.day8.length?n("div",e._l(t.row.day8,function(t){return n("div",{key:t.id},["overTime"==t.type?[e._v("\n                        "+e._s("OT :"+e.FormatDate(t.start,"HH:mm"))+" - "+e._s(e.FormatDate(t.end,"HH:mm"))+"\n                      ")]:[e._v("\n                        "+e._s(e.FormatDate(t.start,"HH:mm"))+" - "+e._s(e.FormatDate(t.end,"HH:mm"))+"\n                      ")]],2)})):n("div",{staticClass:"text-red"},[e._v("\n                    "+e._s(e.$t("OFF"))+"\n                  ")])]),n("q-td",{key:"day9",staticStyle:{"vertical-align":"top"},attrs:{props:t}},[t.row.day9.length?n("div",e._l(t.row.day9,function(t){return n("div",{key:t.id},["overTime"==t.type?[e._v("\n                        "+e._s("OT :"+e.FormatDate(t.start,"HH:mm"))+" - "+e._s(e.FormatDate(t.end,"HH:mm"))+"\n                      ")]:[e._v("\n                        "+e._s(e.FormatDate(t.start,"HH:mm"))+" - "+e._s(e.FormatDate(t.end,"HH:mm"))+"\n                      ")]],2)})):n("div",{staticClass:"text-red"},[e._v("\n                    "+e._s(e.$t("OFF"))+"\n                  ")])]),n("q-td",{key:"day10",staticStyle:{"vertical-align":"top"},attrs:{props:t}},[t.row.day10.length?n("div",e._l(t.row.day10,function(t){return n("div",{key:t.id},["overTime"==t.type?[e._v("\n                        "+e._s("OT :"+e.FormatDate(t.start,"HH:mm"))+" - "+e._s(e.FormatDate(t.end,"HH:mm"))+"\n                      ")]:[e._v("\n                        "+e._s(e.FormatDate(t.start,"HH:mm"))+" - "+e._s(e.FormatDate(t.end,"HH:mm"))+"\n                      ")]],2)})):n("div",{staticClass:"text-red"},[e._v("\n                    "+e._s(e.$t("OFF"))+"\n                  ")])]),n("q-td",{key:"day11",staticStyle:{"vertical-align":"top"},attrs:{props:t}},[t.row.day11.length?n("div",e._l(t.row.day11,function(t){return n("div",{key:t.id},["overTime"==t.type?[e._v("\n                        "+e._s("OT :"+e.FormatDate(t.start,"HH:mm"))+" - "+e._s(e.FormatDate(t.end,"HH:mm"))+"\n                      ")]:[e._v("\n                        "+e._s(e.FormatDate(t.start,"HH:mm"))+" - "+e._s(e.FormatDate(t.end,"HH:mm"))+"\n                      ")]],2)})):n("div",{staticClass:"text-red"},[e._v("\n                    "+e._s(e.$t("OFF"))+"\n                  ")])]),n("q-td",{key:"day12",staticStyle:{"vertical-align":"top"},attrs:{props:t}},[t.row.day12.length?n("div",e._l(t.row.day12,function(t){return n("div",{key:t.id},["overTime"==t.type?[e._v("\n                        "+e._s("OT :"+e.FormatDate(t.start,"HH:mm"))+" - "+e._s(e.FormatDate(t.end,"HH:mm"))+"\n                      ")]:[e._v("\n                        "+e._s(e.FormatDate(t.start,"HH:mm"))+" - "+e._s(e.FormatDate(t.end,"HH:mm"))+"\n                      ")]],2)})):n("div",{staticClass:"text-red"},[e._v("\n                    "+e._s(e.$t("OFF"))+"\n                  ")])]),n("q-td",{key:"day13",staticStyle:{"vertical-align":"top"},attrs:{props:t}},[t.row.day13.length?n("div",e._l(t.row.day13,function(t){return n("div",{key:t.id},["overTime"==t.type?[e._v("\n                        "+e._s("OT :"+e.FormatDate(t.start,"HH:mm"))+" - "+e._s(e.FormatDate(t.end,"HH:mm"))+"\n                      ")]:[e._v("\n                        "+e._s(e.FormatDate(t.start,"HH:mm"))+" - "+e._s(e.FormatDate(t.end,"HH:mm"))+"\n                      ")]],2)})):n("div",{staticClass:"text-red"},[e._v("\n                    "+e._s(e.$t("OFF"))+"\n                  ")])]),n("q-td",{key:"day14",staticStyle:{"vertical-align":"top"},attrs:{props:t}},[t.row.day14.length?n("div",e._l(t.row.day14,function(t){return n("div",{key:t.id},["overTime"==t.type?[e._v("\n                        "+e._s("OT :"+e.FormatDate(t.start,"HH:mm"))+" - "+e._s(e.FormatDate(t.end,"HH:mm"))+"\n                      ")]:[e._v("\n                        "+e._s(e.FormatDate(t.start,"HH:mm"))+" - "+e._s(e.FormatDate(t.end,"HH:mm"))+"\n                      ")]],2)})):n("div",{staticClass:"text-red"},[e._v("\n                    "+e._s(e.$t("OFF"))+"\n                  ")])])]:e._e()],2)]}}])})],1)]),n("div",{staticClass:"row justify-center gutter-lg"},[n("div",{staticClass:"col-xl-4 col-lg-4 col-md-4 col-sm12 col-xs-12"},[n("div",{staticClass:"q-headline"},[e._v(e._s(e.$t(e.$changeCase.sentenceCase(e.$options.name))))]),n("div",{staticClass:"q-subheading"},[e._v(e._s(e.subHeading))]),n("br"),n("br"),n("q-list",[n("q-collapsible",{attrs:{icon:"info",label:e.$t("Leave summary")}},[n("q-list",{attrs:{highlight:""}},[n("q-item",[n("q-item-main",[n("div",{staticClass:"row"},[n("div",{staticClass:"col-2"},[e._v(e._s(e.$t("Type")))]),n("div",{staticClass:"col-5"},[e._v(e._s(e.$t("Entitlement")))]),n("div",{staticClass:"col-5"},[e._v(e._s(e.$t("Remaining")))])])])],1),e._l(e.leaveInfo,function(t){return n("q-item",{key:t.code},[n("q-item-main",[n("div",{staticClass:"row"},[n("div",{staticClass:"col-2"},[e._v(e._s(t.code))]),n("div",{staticClass:"col-5"},[e._v(e._s(t.entitlement))]),n("div",{staticClass:"col-5"},[e._v(e._s(t.remaining))])])])],1)})],2)],1)],1)],1),n("div",{staticClass:"col-xl-8 col-lg-8 col-md-8 col-sm12 col-xs-12"},[n("q-field",{attrs:{label:e.$t("Employee"),"label-width":e.labelWidth}},[n("q-select",{attrs:{disable:"",options:e.authUserOptions},model:{value:e.inputForm.authUser,callback:function(t){e.$set(e.inputForm,"authUser",t)},expression:"inputForm.authUser"}})],1),n("q-field",{attrs:{label:e.$t("Leave type"),"label-width":e.labelWidth}},[n("q-select",{attrs:{disable:e.inputForm.approval,options:e.absenceTypeOptions},model:{value:e.inputForm.absenceType,callback:function(t){e.$set(e.inputForm,"absenceType",t)},expression:"inputForm.absenceType"}})],1),n("q-field",{attrs:{label:e.$t("Dates requested from")+" *","label-width":e.labelWidth,error:e.$v.inputForm.datesRequestedFrom.$error,"error-label":e.$t("Requires non-empty data")}},[n("q-datetime",{attrs:{color:"primary",format:"ddd, DD MMM YYYY - HH:mm",format24h:"",type:"datetime",disable:e.inputForm.approval||e._.isEmpty(e.inputForm.absenceType),min:e.getLeadTime},on:{blur:function(t){e.$v.inputForm.datesRequestedFrom.$touch()},change:function(t){e.inputForm.datesRequestedFrom=t}},model:{value:e.inputForm.datesRequestedFrom,callback:function(t){e.$set(e.inputForm,"datesRequestedFrom",t)},expression:"inputForm.datesRequestedFrom"}})],1),n("q-field",{attrs:{label:e.$t("Dates requested to")+" *","label-width":e.labelWidth,error:e.$v.inputForm.datesRequestedTo.$error,"error-label":e.$t("Requires non-empty data")}},[n("q-datetime",{attrs:{color:"secondary",format:"ddd, DD MMM YYYY - HH:mm",format24h:"",type:"datetime",disable:e.inputForm.approval||e._.isEmpty(e.inputForm.absenceType),min:e.inputForm.datesRequestedFrom},on:{blur:function(t){e.$v.inputForm.datesRequestedTo.$touch()},change:function(t){e.inputForm.datesRequestedTo=t}},model:{value:e.inputForm.datesRequestedTo,callback:function(t){e.$set(e.inputForm,"datesRequestedTo",t)},expression:"inputForm.datesRequestedTo"}})],1),n("q-field",{attrs:{label:e.$t("Note"),"label-width":e.labelWidth}},[n("q-editor",{attrs:{disable:e.inputForm.approval||e._.isEmpty(e.inputForm.absenceType)},model:{value:e.inputForm.note,callback:function(t){e.$set(e.inputForm,"note",t)},expression:"inputForm.note"}})],1),n("q-field",{attrs:{label:e.$t("Attachment"),"label-width":e.labelWidth}},[n("q-uploader",{attrs:{url:"","url-factory":e.uploadAttachment}})],1),e.inputForm.attachment?n("q-field",{attrs:{label:" ","label-width":e.labelWidth}},[n("a",{attrs:{href:e.inputForm.attachment,target:"_blank"}},[e._v(e._s(e.$t("Download attachment")))])]):e._e(),n("q-field",{attrs:{label:e.$t("Approval"),"label-width":e.labelWidth}},[n("q-toggle",{attrs:{disable:"","checked-icon":"sentiment very satisfied","unchecked-icon":"sentiment very dissatisfied"},model:{value:e.inputForm.approval,callback:function(t){e.$set(e.inputForm,"approval",t)},expression:"inputForm.approval"}})],1),n("q-field",{attrs:{label:e.$t("Approved by"),"label-width":e.labelWidth}},[n("q-select",{attrs:{disable:"",options:e.authUserOptions},model:{value:e.inputForm.approvedBy,callback:function(t){e.$set(e.inputForm,"approvedBy",t)},expression:"inputForm.approvedBy"}})],1),n("div",{staticClass:"submit"},["add"===e.formAction?n("q-btn",{staticClass:"q-mr-sm",attrs:{color:"primary",icon:"save","wait-for-ripple":"",disable:e.$v.inputForm.$invalid,label:e.$t("save")},on:{click:e.addForm}}):e._e(),"update"===e.formAction?n("q-btn",{staticClass:"q-mr-sm",attrs:{color:"primary",icon:"save","wait-for-ripple":"",disable:e.$v.inputForm.$invalid,label:e.$t("Save")},on:{click:e.updateForm}}):e._e(),n("q-btn",{staticClass:"q-mr-sm",attrs:{icon:"cancel",color:"light","wait-for-ripple":"",label:e.$t("cancel")},on:{click:function(t){e.formModal=!1}}})],1)],1)])])],1)},a=[];r._withStripped=!0;var o=n("278c"),i=n.n(o),s=n("3156"),u=n.n(s),l=(n("96cf"),n("c973")),d=n.n(l),c=(n("7f7f"),n("551c"),n("ac4d"),n("8a81"),n("ac6a"),n("7514"),n("f490")),f=n("2f62"),m=n("b5ae"),p=n("51476"),v=n("fe5b"),y=n("44de"),h=n("2508"),g=n("05d8"),b=n("a274"),_={name:"leaveRequest",mixins:[p["a"],v["a"],y["a"],h["a"],g["a"],b["a"]],data:function(){return{defaultWorkingHours:8,filterByYear:parseInt(c["d"].formatDate(Date.now(),"YYYY")),leaveRequestColumns:[{name:".key",label:this.$t("ID"),field:".key",sortable:!0,align:"left"},{name:"absenceType",label:this.$t("Type"),field:"absenceType",sortable:!1,align:"left"},{name:"datesRequestedFrom",label:this.$t("From"),field:"datesRequestedFrom",sortable:!0,align:"left"},{name:"datesRequestedTo",label:this.$t("To"),field:"datesRequestedTo",sortable:!0,align:"left"},{name:"totalHours",label:this.$t("Hours"),field:"totalHours",sortable:!1,align:"left"},{name:"approval",label:this.$t("Approval"),field:"approval",sortable:!1,align:"left"}],leaveRequestVisibleColumns:["absenceType","datesRequestedFrom","datesRequestedTo","approval"],leaveRequestPagination:{sortBy:"datesRequestedFrom",descending:!0},inputForm:{".key":null,authUser:"",authUserName:"",absenceType:"",datesRequestedFrom:new Date,datesRequestedTo:new Date,totalHours:0,note:"",attachment:"",approval:!1,approvedBy:null,calendarYear:parseInt(c["d"].formatDate(Date.now(),"YYYY")),createdBy:null,createdOn:null,modifiedBy:null,modifiedOn:null},myRosterDatatable:[],myRosterVisibleColumns:["day1","day2","day3","day4","day5","day6","day7","day8","day9","day10","day11","day12","day13","day14"],publicHolidays:[],workingSchedule:[],overtimeRequest:[],companyInfo:{},leaveInfo:[],overtimePay:0,entitlement:"",entitlementHour:0,leaveTaken:"",leaveTakenHour:0,remaining:"",remainingHour:0,currentTotalHours:0}},validations:function(){return{inputForm:{authUser:{required:m["required"]},absenceType:{required:m["required"]},datesRequestedFrom:{required:m["required"]},datesRequestedTo:{required:m["required"]},totalHours:{required:m["required"]}}}},firestore:function(){return{company:this.$database.collection("company"),initialSetup:this.$database.collection("initialSetup"),leaveRequestDatatable:this.$database.collection("leaveRequest").where("authUser","==",this.userId).where("calendarYear","==",this.filterByYear).orderBy("datesRequestedFrom","desc"),leaveRequest:this.$database.collection("leaveRequest"),overtime:this.$database.collection("overtimeRequest").where("approval","==",!0).where("authUser","==",this.userId).where("otCompensate","==",!0).where("calendarYear","==",this.filterByYear)}},methods:{calculateTotalHours:function(){var e=this,t=0,n=e.isLeaveOneday(),r=e.inputForm.datesRequestedFrom,a=e.inputForm.datesRequestedTo,o=null,i=null,s="",u=e._.last(e.workingSchedule),l="",d=new Date,f=new Date;if(n){if(s=e.FormatDate(r,"YYYYMMDD"),l=e._.find(e.workingSchedule,{sequence:s,type:"workSchedule"}),e._.isUndefined(l)){if(c["d"].getDateDiff(r,u,"days")>0){var m=e._.toLower(c["d"].formatDate(e.inputForm.datesRequestedTo,"dddd")),p=e.companyInfo[m]["rangeFrom"],v=e.companyInfo[m]["rangeTo"];o=c["d"].getDateDiff(r,p,"minutes")>=0?p:r,i=c["d"].getDateDiff(a,v,"minutes")>=0?v:a,t=c["d"].getDateDiff(i,o,"hours")}}else d=l.start,f=l.end,o=c["d"].getDateDiff(r,d,"minutes")>=0?d:r,i=c["d"].getDateDiff(a,f,"minutes")>=0?f:a,t=c["d"].getDateDiff(i,o,"hours");return t}var y=c["d"].getDateDiff(a,r,"days")+1,h=new Date,g=new Date,b=new Date,_=null,F=null,w=null,D=!0,q=!1,H=void 0;try{for(var O,$=e._.range(y)[Symbol.iterator]();!(D=(O=$.next()).done);D=!0){var k=O.value;h=c["d"].addToDate(r,{days:k}),g=c["d"].addToDate(r,{days:k}),b=c["d"].addToDate(a,{days:k}),s=e.FormatDate(h,"YYYYMMDD"),c["d"].getDateDiff(h,u,"days")>0?(_=e._.toLower(c["d"].formatDate(h,"dddd")),F=e.companyInfo[_]["rangeFrom"],w=e.companyInfo[_]["rangeTo"],o=c["d"].getDateDiff(g,F,"minutes")>=0?F:g,i=c["d"].getDateDiff(b,w,"minutes")>=0?w:b,t+=c["d"].getDateDiff(i,o,"hours")):(l=e._.find(e.workingSchedule,{sequence:s,type:"workSchedule"}),e._.isUndefined(l)||(d=l.start,f=l.end,o=c["d"].getDateDiff(g,d,"minutes")>=0?d:g,i=c["d"].getDateDiff(b,f,"minutes")>=0?f:b,t+=c["d"].getDateDiff(i,o,"hours")))}}catch(e){q=!0,H=e}finally{try{D||null==$.return||$.return()}finally{if(q)throw H}}return t},getCompanyInfo:function(){var e=this;return new Promise(function(t){var n={};e.$firestore.company.orderBy("name").limit(1).get().then(function(e){return e.forEach(function(e){n=e.data()}),t(n)})})},getWorkingHour:function(){var e=this;return new Promise(function(t){var n=e._.find(e.initialSetup,["code","_WRKH"])?parseInt(e._.find(e.initialSetup,["code","_WRKH"]).value):8;return t(n)})},getCurrentDateStart:function(e){var t=c["d"].buildDate({year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate(),hours:0,minutes:0,seconds:0,milliseconds:0});return t},getCurrentDateEnd:function(e){var t=c["d"].buildDate({year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate(),hours:23,minutes:59,seconds:59,milliseconds:59});return t},getLeaveInfo:function(){var e=this;return new Promise(function(t){var n=e,r=[];return n.absenceTypeOptions.forEach(function(e){"OTC"===e.code?(n.entitlement="".concat(n.overtimePay/n.defaultWorkingHours," ").concat(n.$t("days"),"  (").concat(n.overtimePay," ").concat(n.$t("hours"),")"),n.entitlementHour=n.overtimePay):(n.entitlement="".concat(e.entitlement," ").concat(n.$t("days")," (").concat(e.entitlement*n.defaultWorkingHours," ").concat(n.$t("hours"),")"),n.entitlementHour=e.entitlement*n.defaultWorkingHours),n.leaveTaken="".concat(n._.sumBy(n._.filter(n.leaveRequest,{absenceType:e.id}),"totalHours")/n.defaultWorkingHours,"  ").concat(n.$t("days")," (").concat(n._.sumBy(n._.filter(n.leaveRequest,{absenceType:e.id}),"totalHours")," ").concat(n.$t("Hours"),")"),n.leaveTakenHour=n._.sumBy(n._.filter(n.leaveRequest,{absenceType:e.id}),"totalHours"),n.remaining="".concat((n.entitlementHour-n.leaveTakenHour)/n.defaultWorkingHours," ").concat(n.$t("days")," (").concat(n.entitlementHour-n.leaveTakenHour," ").concat(n.$t("hours"),")"),n.remainingHour=n.entitlementHour-n.leaveTakenHour,r.push({id:e.id,code:e.code,entitlement:n.entitlement,entitlementHour:n.entitlementHour,leaveTaken:n.leaveTaken,leaveTakenHour:n.leaveTakenHour,remaining:n.remaining,remainingHour:n.remainingHour})}),t(r)})},getOvertimePay:function(){var e=this;return new Promise(function(t){var n=e,r=[],a=0;n.$firestore.overtime.get().then(function(e){return e.forEach(function(e){r.push({id:e.id,data:e.data(),overtimePay:e.data().overtimePay})}),a=n._.sumBy(r,"overtimePay"),t(a)})})},getPublicHoliday:function(){var e=this;return new Promise(function(t){var n=e,r=[],a=parseInt(c["d"].formatDate(n.inputForm.datesRequestedFrom,"YYYY")),o=parseInt(c["d"].formatDate(n.inputForm.datesRequestedFrom,"YYYY"))+1;n.$database.collection("publicHolidays").where("year",">=",a).where("year","<=",o).get().then(function(e){return e.forEach(function(e){r.push({id:e.id,title:e.data().holiday,date:e.data().date})}),t(r)})})},getWorkingSchedule:function(){var e=this;return new Promise(function(t){var n=e,r=[],a=new Date(n.inputForm.datesRequestedFrom),o=c["d"].addToDate(new Date(n.inputForm.datesRequestedFrom),{days:13}),i=n.getCurrentDateStart(a),s=n.getCurrentDateEnd(o);n.$database.collection("workSchedule").where("start",">=",i).where("start","<=",s).where("authUser","==",n.userId).orderBy("start").get().then(function(e){return e.forEach(function(e){r.push({id:e.id,authUser:e.data().authUser,start:e.data().start,end:e.data().end,note:e.data().note,type:e.data().type,sequence:c["d"].formatDate(e.data().start,"YYYYMMDD")})}),t(r)})})},isLeaveOneday:function(){var e=!0;return c["d"].getDateDiff(this.inputForm.datesRequestedTo,this.inputForm.datesRequestedFrom,"days")>0&&(e=!1),e},isPublicHoliday:function(e,t){var n="";return this.publicHolidays.forEach(function(r){c["d"].formatDate(r.date,t)===e&&(n="".concat(r.title))}),n},rosterCalendar:function(e,t){var n=c["d"].formatDate(c["d"].addToDate(e,{days:t}),"ddd DD-MMM-YYYY");return n},uploadAttachment:function(e){var t=this,n="leaveDocument/".concat(t.userId,"/").concat(c["d"].formatDate(new Date,"YYYYMMDD-HHmmss")),r=e.name;t.$storage.ref().child("".concat(n,"/").concat(r)).put(e).then(function(e){t.$q.notify({message:"".concat(t.$t("Attachment uploaded successfully")),type:"info",icon:"info"}),e.ref.getDownloadURL().then(function(e){t.inputForm.attachment=e})})},createWorkScheduleTable:function(){var e=this,t=[],n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e._.range(14)[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var u=i.value,l=c["d"].formatDate(c["d"].addToDate(e.inputForm.datesRequestedFrom,{days:u}),"YYYYMMDD"),d=e.isPublicHoliday(l,"YYYYMMDD");n.push(d)}}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}t.push({type:"ph",day1:n[0],day2:n[1],day3:n[2],day4:n[3],day5:n[4],day6:n[5],day7:n[6],day8:n[7],day9:n[8],day10:n[9],day11:n[10],day12:n[11],day13:n[12],day14:n[13]});var f=[],m=!0,p=!1,v=void 0;try{for(var y,h=function(){var t=y.value,n=c["d"].formatDate(c["d"].addToDate(e.inputForm.datesRequestedFrom,{days:t}),"YYYYMMDD"),r=e._.filter(e.workingSchedule,function(e){return c["d"].formatDate(e.start,"YYYYMMDD")===n});f.push(r)},g=e._.range(14)[Symbol.iterator]();!(m=(y=g.next()).done);m=!0)h()}catch(e){p=!0,v=e}finally{try{m||null==g.return||g.return()}finally{if(p)throw v}}return t.push({type:"ws",day1:f[0],day2:f[1],day3:f[2],day4:f[3],day5:f[4],day6:f[5],day7:f[6],day8:f[7],day9:f[8],day10:f[9],day11:f[10],day12:f[11],day13:f[12],day14:f[13]}),t},iOpenAddForm:function(){var e=d()(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this,this.$q.loading.show(),e.next=4,t.getCompanyInfo();case 4:return t.companyInfo=e.sent,e.next=7,t.getPublicHoliday();case 7:return t.publicHolidays=e.sent,e.next=10,t.getWorkingHour();case 10:return t.defaultWorkingHours=e.sent,e.next=13,t.getOvertimePay();case 13:return t.overtimePay=e.sent,e.next=16,t.getLeaveInfo();case 16:return t.leaveInfo=e.sent,t.openAddForm(t.inputForm),e.next=20,t.getWorkingSchedule();case 20:t.workingSchedule=e.sent,t.myRosterDatatable=t.createWorkScheduleTable(),t.inputForm.authUser=t.userId,t.$q.loading.hide();case 24:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),iOpenUpdateFrom:function(){var e=d()(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this,this.$q.loading.show(),e.next=4,t.getCompanyInfo();case 4:return t.companyInfo=e.sent,e.next=7,t.getPublicHoliday();case 7:return t.publicHolidays=e.sent,e.next=10,t.getWorkingHour();case 10:return t.defaultWorkingHours=e.sent,e.next=13,t.getOvertimePay();case 13:return t.overtimePay=e.sent,e.next=16,t.getLeaveInfo();case 16:return t.leaveInfo=e.sent,t.openUpdateFrom(t.inputForm,t.selected[0]),t.currentTotalHours=t.inputForm.totalHours,e.next=21,t.getWorkingSchedule();case 21:t.workingSchedule=e.sent,t.myRosterDatatable=t.createWorkScheduleTable(),t.$q.loading.hide();case 24:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),addForm:function(){var e=d()(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this,n=t._.find(t.leaveInfo,{id:t.inputForm.absenceType})["remainingHour"],e.next=4,t.calculateTotalHours();case 4:if(t.inputForm.totalHours=e.sent,!(t.inputForm.totalHours<=n)){e.next=14;break}return t.inputForm.authUserName=t._.find(t.authUserOptions,{id:t.userId})["label"],t.inputForm.calendarYear=parseInt(c["d"].formatDate(t.inputForm.datesRequestedFrom,"YYYY")),t.inputForm.createdBy=t.inputForm.modifiedBy=t.userId,t.inputForm.createdOn=t.inputForm.modifiedOn=new Date,e.next=12,t.addProcess(t.$firestore.leaveRequest,t.inputForm,t.$v.inputForm);case 12:e.next=15;break;case 14:t.$q.notify({message:"".concat(t.$t("Over limit")),type:"negative",icon:"error_outline"});case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),updateForm:function(){var e=d()(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this,n=t._.find(t.leaveInfo,{id:t.inputForm.absenceType})["remainingHour"],e.next=4,t.calculateTotalHours();case 4:if(t.inputForm.totalHours=e.sent,!(t.inputForm.totalHours<=n+t.currentTotalHours)){e.next=12;break}return t.inputForm.modifiedBy=t.userId,t.inputForm.modifiedOn=new Date,e.next=10,t.updateProcess(t.$firestore.leaveRequest,t.inputForm,t.$v.inputForm);case 10:e.next=13;break;case 12:t.$q.notify({message:"".concat(t.$t("Over limit")),type:"negative",icon:"error_outline"});case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),deleteRow:function(){var e=d()(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this,e.next=3,t.deleteProcess(t.selected,t.$firestore.leaveRequest);case 3:t.selected=[];case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},computed:u()({},Object(f["c"])(["userId"]),{myRosterColumns:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var a,o=this._.range(14)[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var i=a.value;e.push({name:"day".concat(i+1),label:this.rosterCalendar(this.inputForm.datesRequestedFrom,i),field:"day".concat(i+1),sortable:!1,align:"center"})}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return e},getLeadTime:function(){var e=this,t=new Date;if(e.inputForm.absenceType){var n=e._.find(e.absenceTypeOptions,{value:e.inputForm.absenceType}).data.requestLeadTime;if("update"===e.formAction){var r=new Date(e.inputForm.createdOn);t=c["d"].buildDate({year:r.getFullYear(),month:r.getMonth()+1,date:r.getDate(),hours:0,minutes:0,seconds:0,milliseconds:0}),t.setDate(t.getDate()+n)}else{var a=new Date;t=c["d"].buildDate({year:a.getFullYear(),month:a.getMonth()+1,date:a.getDate(),hours:0,minutes:0,seconds:0,milliseconds:0}),t.setDate(t.getDate()+n)}}return t}}),created:function(){var e=d()(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadingState(this.$firestore.leaveRequestDatatable);case 2:t=e.sent,n=i()(t,2),this.collectionSize=n[0],this.loading=n[1];case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),watch:{"inputForm.absenceType":function(){this.inputForm.absenceType&&"add"===this.formAction&&(this.inputForm.datesRequestedFrom=this.getLeadTime,this.inputForm.datesRequestedTo=this.getLeadTime)},"inputForm.datesRequestedFrom":function(){var e=d()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if("add"!==this.formAction){e.next=8;break}return e.next=3,this.getPublicHoliday();case 3:return this.publicHolidays=e.sent,e.next=6,this.getWorkingSchedule();case 6:this.workingSchedule=e.sent,this.myRosterDatatable=this.createWorkScheduleTable();case 8:this.inputForm.datesRequestedFrom>this.inputForm.datesRequestedTo&&(this.inputForm.datesRequestedTo=this.inputForm.datesRequestedFrom);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),"inputForm.datesRequestedTo":function(){var e=d()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.inputForm.datesRequestedFrom>this.inputForm.datesRequestedTo&&(this.inputForm.datesRequestedTo=this.inputForm.datesRequestedFrom);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},F=_,w=n("2877"),D=Object(w["a"])(F,r,a,!1,null,null,null);D.options.__file="leaveRequest.vue";t["default"]=D.exports},d294:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("78ef"),a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.withParams)({type:"or"},function(){for(var e=this,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t.length>0&&t.reduce(function(t,n){return t||n.apply(e,r)},!1)})};t.default=a},d4f4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("78ef"),a=(0,r.withParams)({type:"required"},r.req);t.default=a},e652:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("78ef"),a=function(e){return(0,r.withParams)({type:"requiredUnless",prop:e},function(t,n){return!!(0,r.ref)(e,this,n)||(0,r.req)(t)})};t.default=a},eb66:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("78ef"),a=function(e){return(0,r.withParams)({type:"minValue",min:e},function(t){return!(0,r.req)(t)||(!/\s/.test(t)||t instanceof Date)&&+t>=+e})};t.default=a},ec11:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("78ef"),a=function(e,t){return(0,r.withParams)({type:"between",min:e,max:t},function(n){return!(0,r.req)(n)||(!/\s/.test(n)||n instanceof Date)&&+e<=+n&&+t>=+n})};t.default=a},f5766:function(e,t,n){"use strict";var r=n("5ca1"),a=n("2e08"),o=n("a25f");r(r.P+r.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(o),"String",{padStart:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},fe5b:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},a=[];r._withStripped=!0;n("96cf");var o=n("c973"),i=n.n(o),s=(n("ac6a"),n("551c"),{data:function(){return{authUserOptions:[]}},methods:{getAuthUserOptions:function(){var e=this;return new Promise(function(t){var n=e,r=[];n.$database.collection("authUser").where("active","==",!0).orderBy("firstName").get().then(function(e){return e.forEach(function(e){r.push({id:e.id,data:e.data(),department:e.data().department,reportTo:e.data().reportTo,photo:e.data().photo,value:e.id,label:"".concat(e.data().firstName," ").concat(e.data().lastName),model:!1})}),t(r)}).catch(function(e){console.log(e)})})}},created:function(){var e=i()(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this,e.next=3,t.getAuthUserOptions();case 3:t.authUserOptions=e.sent;case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}),u=s,l=n("2877"),d=Object(l["a"])(u,r,a,!1,null,null,null);d.options.__file="authUserOptions.vue";t["a"]=d.exports}}]);